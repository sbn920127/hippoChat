{"version":3,"sources":["components/ChatSpace/index.module.scss","components/Header/index.module.scss","components/ChatList/chatList.module.scss","components/TextField/index.module.scss","components/CardMember/index.module.scss","components/BtnBurgerMenu/index.module.scss","components/AvatarUpdate/index.module.scss","components/BtnLogout/index.module.scss","views/LoginPage/login.module.scss","components/SocialAuth/img/facebook-f-brands.svg","components/SocialAuth/img/google-brands.svg","components/SocialAuth/img/github-brands.svg","views/Account/account.module.scss","firebaseAPI.js","Auth.js","PrivateRoute.js","components/BtnBurgerMenu/index.js","components/BtnLogout/index.js","components/Header/index.js","tool/validate.js","components/TextField/index.js","components/BtnMain/index.js","components/BtnClose/index.js","components/Alert/index.js","components/FormLogin/index.js","components/FormRegister/index.js","components/Modal/index.js","components/FormForgetPassword/index.js","views/LoginPage/index.js","components/ChatList/index.js","components/ChatSpace/index.js","views/Chat/index.js","components/AvatarUpdate/index.js","views/Account/index.js","components/CardMember/index.js","views/Members/index.js","views/App/index.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","storage","AuthContext","React","createContext","AuthProvider","props","setCurrentChatId","bind","state","currentUser","currentChatId","padding","changeChatId","onAuthStateChanged","user","setState","id","this","Provider","value","children","Component","PrivateRoute","RouteComponent","component","rest","useContext","render","routeProps","to","BtnBurgerMenu","_className","style","active","push","join","className","type","onClick","BtnLogout","logout","aria-label","signOut","alert","Menus","Header","menuActive","navClass","nav","handlerClick","console","log","header","ref","headerRef","navbar","emailRequired","error","test","passwordRequired","length","required","TextField","label","useField","field","meta","input","writing","htmlFor","name","touched","BtnMain","onChange","text","BtnClose","aria-hidden","Alert","useState","hide","setHide","role","hasCloseBtn","FormLogin","history","useHistory","responseStatus","setResponseStatus","initialValues","email","password","onSubmit","values","a","resetForm","signInWithEmailAndPassword","code","Err","handleError","validate","onClickForgetForm","FormRegister","nickname","confirmPassword","createUserWithEmailAndPassword","then","res","handleResponse","getDownloadURL","url","collection","doc","uid","set","avatar","fileLocation","Modal","classN","title","onclick","FormForgetPassword","sendPasswordResetEmail","handleMsg","ReturnMsg","LoginPage","isModalOpen","forgetPasswordStatus","handleClick","showForgetPassword","handleResponseStatus","hideModal","setTimeout","innerClass","inner","groupAClass","groupBClass","ChatSummary","chat","date","d","result","now","moment","seconds","diff","minutes","hours","get","format","HandlerDate","last_msg_id","_class","item","summary","src","alt","members","last_msg","col","unread","ChatList","searchHeight","roomHeight","search","chats","createRef","UpdateDimensions","FilterChat","window","addEventListener","nextProps","nextState","headerHeight","removeEventListener","current","clientHeight","innerHeight","regex","RegExp","newChats","filter","_chats","map","key","talking","e","target","items","height","contextType","textareaDimensions","_clientHeight","_scrollHeight","scrollHeight","Dialog","currentUid","msg","sentBy","readed","ChatSpace","_header","_chatInputSection","inputHeight","dialogueHeight","showing","inputHandle","submitHandle","Object","keys","context","nativeEvent","keyCode","preventDefault","trim","AddMessages","dialogue","messages","toList","rows","placeholder","onKeyPress","Chat","users","userChats","chatMessages","msgListener","mobile","chatListClass","chatSpaceClass","IsMobile","WindowResize","showChatList","showChatSpace","HandleChangeChatId","GetChats","SetCurrentChat","GetCurrentUsers","GetCurrentMessages","GetMessages","mql","matchMedia","matches","chat_id","chatId","chatsListener","Promise","resolve","where","onSnapshot","snapshot","docChanges","i","change","chatData","data","targetId","person","userDoc","sort","b","forEach","toString","orderBy","limit","index","msgData","update","prevState","findIndex","_messages","currentMsgListener","msgId","_users","dialog","Date","imgs","created","firestore","FieldValue","serverTimestamp","increment","AvatarUpdate","imgFileLocal","imgUrl","ChangeFile","CheckImgSize","HandlerImg","Compression","SetUserAvatar","DeleteUserAvatar","_file","_canvas","reader","FileReader","files","size","readAsDataURL","onload","stok","Math","ceil","mtok","maxBytes","file","dx","dy","canvas","getContext","_img","Image","ctx","ImgDimensions","width","drawImage","img","viewDimensions","scale","minSize","min","maxSize","toBlob","blob","local","replace","put","delete","accept","click","EditArea","isEdit","getUserInfo","Account","CardMember","card","btn","Members","createChat","getMembers","querySnapshot","_members","exists","includes","myselfIsFirst","targetIsFirst","add","docRef","merge","member","App","Auth","exact","path","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.3acb21bb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-space-header\":\"ChatSpace_chat-space-header__2KspR\",\"user-name\":\"ChatSpace_user-name__IXPIh\",\"dialogue\":\"ChatSpace_dialogue__200KM\",\"dialog\":\"ChatSpace_dialog__Y1UlP\",\"avatar\":\"ChatSpace_avatar__1yLxO\",\"say\":\"ChatSpace_say__3Z6ln\",\"states\":\"ChatSpace_states__1yjFX\",\"remote\":\"ChatSpace_remote__3W4AV\",\"local\":\"ChatSpace_local__etFqx\",\"chat-input\":\"ChatSpace_chat-input__qy9e_\",\"chat-input-field\":\"ChatSpace_chat-input-field__1Y3dG\",\"chat-input-tool\":\"ChatSpace_chat-input-tool__251Xc\",\"icon-btn\":\"ChatSpace_icon-btn__lL0fl\",\"icon-btn-submit\":\"ChatSpace_icon-btn-submit__17JiR ChatSpace_icon-btn__lL0fl\",\"icon-btn-emoji\":\"ChatSpace_icon-btn-emoji__1Gvyb ChatSpace_icon-btn__lL0fl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__MbTxY\",\"fixed\":\"Header_fixed__1bXSb\",\"nav\":\"Header_nav__1qWb_\",\"navbar\":\"Header_navbar__2AxSS\",\"navbar-brand\":\"Header_navbar-brand__1iGbD\",\"nav-link\":\"Header_nav-link__3l94V\",\"burger-menu\":\"Header_burger-menu__LVpEC\",\"nav-active\":\"Header_nav-active__1GPcU Header_nav__1qWb_\",\"nav-item\":\"Header_nav-item__pKk_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"chatList_row__3bObz\",\"items\":\"chatList_items__3zMAM\",\"item\":\"chatList_item__1rPCt\",\"item-active\":\"chatList_item-active__2o27v chatList_item__1rPCt\",\"summary\":\"chatList_summary__2ovCu\",\"summary-avatar\":\"chatList_summary-avatar__1ZWJk\",\"summary-content\":\"chatList_summary-content__CeFAJ\",\"summary-name\":\"chatList_summary-name__1panW\",\"summary-text\":\"chatList_summary-text__tnoDO\",\"col\":\"chatList_col__1WcEy\",\"date\":\"chatList_date__2o34K\",\"unread\":\"chatList_unread__3Z-K-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-field\":\"TextField_text-field__1iIu4\",\"input-field\":\"TextField_input-field__dxXZa\",\"label\":\"TextField_label__uKNDo\",\"input\":\"TextField_input__2ZaZ2\",\"writing\":\"TextField_writing__3Hr-C\",\"invalid-feedback\":\"TextField_invalid-feedback__20671\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"CardMember_card__reP1O\",\"card-body\":\"CardMember_card-body__35bMZ\",\"card-title\":\"CardMember_card-title__1uNMn\",\"img-frame\":\"CardMember_img-frame__1y8lU\",\"btn\":\"CardMember_btn__3JmXv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn-menu\":\"BtnBurgerMenu_btn-menu__t-cWL\",\"btn-menu-active\":\"BtnBurgerMenu_btn-menu-active__3i2eE\",\"burger-inner\":\"BtnBurgerMenu_burger-inner__mXelr\",\"burger-box\":\"BtnBurgerMenu_burger-box__gcWop\",\"burger-menu\":\"BtnBurgerMenu_burger-menu__3KtR7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"AvatarUpdate_avatar__2ymA7\",\"avatar-btn\":\"AvatarUpdate_avatar-btn__2IZBr\",\"img-frame\":\"AvatarUpdate_img-frame___aoDr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logout\":\"BtnLogout_logout__1V49j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inner\":\"login_inner__2y96n\"};","module.exports = __webpack_public_path__ + \"static/media/facebook-f-brands.53757d93.svg\";","module.exports = __webpack_public_path__ + \"static/media/google-brands.da3a9ed4.svg\";","module.exports = __webpack_public_path__ + \"static/media/github-brands.ec5bc1b3.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input-field\":\"account_input-field__X1-Jj\"};","import * as firebase from \"firebase\";\n\nconst config = {\n  apiKey: \"AIzaSyADu9CWQ78aswvnNtVhxK-W-T9av4g2jt0\",\n  authDomain: \"hippo-chat-17580.firebaseapp.com\",\n  databaseURL: \"https://hippo-chat-17580.firebaseio.com\",\n  projectId: \"hippo-chat-17580\",\n  storageBucket: \"hippo-chat-17580.appspot.com\",\n  messagingSenderId: \"285407145365\",\n  appId: \"1:285407145365:web:97f559eb273b6d11241a9c\",\n  measurementId: \"G-2WWKLLKNC4\"\n};\n\nfirebase.initializeApp(config);\n\nexport const auth = firebase.auth();\nexport const db = firebase.firestore();\nexport const storage = firebase.storage();\n\n\n\n\n","import React from \"react\";\nimport { auth } from \"./firebaseAPI\";\n\nexport const AuthContext = React.createContext();\n\nclass AuthProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setCurrentChatId = this.setCurrentChatId.bind(this);\n    this.state = {\n      currentUser: null,\n      currentChatId: null,\n      padding: true,\n      changeChatId: this.setCurrentChatId\n    };\n  }\n  componentDidMount() {\n    auth.onAuthStateChanged((user) => {\n      this.setState({\n        currentUser: user,\n        padding: false\n      })\n    })\n  }\n  setCurrentChatId(id) {\n    this.setState({\n      currentChatId: id\n    });\n  }\n  render() {\n    if (this.state.padding) {\n      return <>Loading...</>\n    }\n\n    return (\n      <AuthContext.Provider\n        value={this.state}\n      >\n        {this.props.children}\n      </AuthContext.Provider>\n    )\n  }\n}\n\nexport default AuthProvider;\n","import React, { useContext } from \"react\";\nimport {\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport { AuthContext } from \"./Auth\";\n\nconst PrivateRoute = ({component: RouteComponent, ...rest}) => {\n  const { currentUser } = useContext(AuthContext);\n\n  return (\n    <Route\n      {...rest}\n      render={routeProps => !!currentUser ? (\n        <RouteComponent {...routeProps} {...rest.props}/>\n      ) : (\n        <Redirect to={\"/login\"} />\n      )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import React from \"react\";\nimport style from \"./index.module.scss\";\n\nconst BtnBurgerMenu = (props) => {\n  let _className = [style[\"btn-menu\"]];\n\n  if (props.active) _className.push(style[\"btn-menu-active\"]);\n\n  _className = _className.join(\" \");\n\n  if (props.className) _className += \" \" + props.className;\n\n  return (\n    <button type=\"button\" className={_className} onClick={props.onClick}>\n      <div className={style[\"burger-box\"]}>\n        <div className={style[\"burger-inner\"]}></div>\n      </div>\n    </button>\n  )\n};\n\nexport default BtnBurgerMenu;\n\n\n","import React from \"react\";\nimport style from \"./index.module.scss\";\nimport { auth } from \"../../firebaseAPI\";\n\nconst BtnLogout = (props) => {\n  return (\n    <button\n      className={style.logout}\n      type=\"button\"\n      aria-label=\"logout\"\n      onClick={() => {\n        if (props.onClick) {\n          props.onClick();\n        }\n        auth.signOut();\n        alert('已登出');\n      }}\n    >\n      登出\n    </button>\n  )\n};\n\nexport default BtnLogout;\n","import React, {useContext} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport style from \"./index.module.scss\";\nimport BurgerMenuIcon from \"../BtnBurgerMenu\";\nimport LogoutBtn from \"../BtnLogout\";\nimport { AuthContext } from \"../../Auth\";\n\nconst Menus = (props) => {\n  const { currentUser, changeChatId } = useContext(AuthContext);\n  if (currentUser) {\n    return (\n      <>\n        <li className={style[\"nav-item\"]}>\n          <Link\n            to=\"/chat\"\n            className={style[\"nav-link\"]}\n            onClick={() => {\n              changeChatId(\"\");\n              props.onClick();\n            }}\n          >Chat</Link>\n        </li>\n        <li className={style[\"nav-item\"]}>\n          <Link\n            to=\"/account\"\n            className={style[\"nav-link\"]}\n            onClick={props.onClick}\n          >帳號</Link>\n        </li>\n        <li className={style[\"nav-item\"]}>\n          <LogoutBtn onClick={props.onClick}/>\n        </li>\n      </>\n    );\n  }\n  return (\n    <>\n      <li className={style[\"nav-item\"]}>\n        <Link\n          to=\"/login\"\n          className={style[\"nav-link\"]}\n          onClick={props.onClick}\n        >登入/註冊</Link>\n      </li>\n    </>\n  )\n};\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuActive: false,\n      navClass: style.nav\n    };\n    this.handlerClick = this.handlerClick.bind(this);\n  }\n\n  handlerClick() {\n    console.log(\"hi\");\n    this.setState(state => ({\n      menuActive: !state.menuActive,\n      navClass: !state.menuActive ? style['nav-active'] : style.nav\n    }));\n  }\n\n  render() {\n    return (\n      <header className={style.header} ref={this.props.headerRef}>\n        <nav className={style.navbar}>\n          <Link to=\"/\" className={style[\"navbar-brand\"]}>Hippo chat</Link>\n          <ul className={this.state.navClass}>\n            <Menus onClick={this.handlerClick}/>\n          </ul>\n          <BurgerMenuIcon className={style[\"burger-menu\"]} active={this.state.menuActive} onClick={() => this.handlerClick()}/>\n        </nav>\n      </header>\n    )\n  }\n}\n\nexport default Header;\n","// 驗證EMAIL(必填、格式)\nexport const emailRequired = (value) => {\n  let error;\n  if (!value) {\n    error = '必填'\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(value)) {\n    error = '無效的Email格式';\n  }\n  return error;\n};\n\n// 驗證密碼(必填、格式)\nexport const passwordRequired = (value) => {\n  let error;\n  if (!value) {\n    error = '必填';\n  } else if (value.length < 6) {\n    error = '密碼太短囉';\n  } else if (!/[A-Z]{1,}/i.test(value)) {\n    error = '至少要一個字母';\n  }\n  return error;\n};\n\n// 驗證是否必填\nexport const required = (value) => {\n  let error;\n  if (!value) {\n    error = '必填';\n  }\n  return error;\n};\n\nexport const confirmPassword = (value, password) => {\n  let error;\n  if (!value) {\n    error = '必填';\n  } else if (value !== password) {\n    error = \"密碼不相符\";\n  }\n  return error;\n};\n","import React from \"react\";\nimport style from \"./index.module.scss\";\nimport { useField, Field } from \"formik\";\n\n\nconst TextField = ({label, ...props}) => {\n  const [field, meta] = useField(props);\n  let _className = [style.input];\n  if (meta.value && meta.value.length > 0) _className.push(style.writing);\n  _className = _className.join(\" \");\n  return (\n    <div className={style[\"text-field\"]}>\n      <div className={style[\"input-field\"]}>\n        <Field className={_className} {...field} {...props}/>\n        <label htmlFor={props.name} className={style.label}>{label}</label>\n      </div>\n      { meta.touched && meta.error ? (<div className={style[\"invalid-feedback\"]}>{meta.error}</div>) : null}\n    </div>\n  )\n};\n\n\nexport default TextField;\n","import React from \"react\";\nimport \"./index.scss\";\n\nconst BtnMain = (props) => {\n  return (\n    <button type={props.type || \"button\"} className=\"main-btn\" onChange={props.onChange}>\n      <span>{props.text}</span>\n    </button>\n  )\n};\n\nexport default BtnMain;\n","import React from \"react\";\nimport \"./index.scss\";\n\nconst BtnClose = (props) => {\n  return (\n    <button\n      className=\"close\"\n      type=\"button\"\n      aria-label=\"close\"\n      onClick={props.onClick}\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  )\n};\n\nexport default BtnClose;\n","import React, { useState } from \"react\";\nimport \"./index.scss\";\nimport CloseBtn from \"../BtnClose\";\n\n\nconst Alert = (props) => {\n  const [ hide, setHide ] = useState(false);\n\n  if (hide) {\n    return null;\n  }\n\n  return (\n    <div className={`alert ${props.className}`} role=\"alert\">\n      {props.hasCloseBtn && <CloseBtn onClick={() => setHide(true)} />}\n      {props.children}\n    </div>\n  )\n};\n\nexport default Alert;\n","import React, { useState } from \"react\";\nimport \"./index.scss\";\nimport { auth } from \"../../firebaseAPI\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  Formik,\n  Form\n} from \"formik\";\nimport {\n  emailRequired,\n  required\n} from \"../../tool/validate\";\nimport TextField from \"../TextField\";\nimport MainBtn from \"../BtnMain\";\nimport SocialAuth from \"../SocialAuth\";\nimport Alert from \"../Alert\";\n\n\n// 提示登入錯誤訊息\nconst handleError = Err => {\n  switch (Err) {\n    case \"auth/wrong-password\":\n      return (\n        <Alert className=\"alert-danger\">\n          密碼錯誤\n        </Alert>\n      );\n    case \"auth/user-not-found\":\n      return (\n        <Alert className=\"alert-danger\">\n          此帳號不存在\n        </Alert>\n      );\n    default:\n      return null\n  }\n};\n\n// 主要表單\nconst FormLogin = (props) => {\n  const history = useHistory();\n  const [ responseStatus, setResponseStatus ] = useState(null);\n\n\n  return (\n    <div className=\"login\">\n      <h1>登入帳號</h1>\n      {/*<SocialAuth/>*/}\n      {/*<p>或者用電子郵件登入</p>*/}\n      <Formik\n        initialValues={{\n          email: '',\n          password: ''\n        }}\n        onSubmit={async (values, {resetForm}) => {\n          const { email, password } = values;\n          try {\n            await auth.signInWithEmailAndPassword(email, password);\n            history.push(\"/\");\n          } catch (error) {\n            setResponseStatus(error.code);\n            resetForm({\n              email: '',\n              password: ''\n            });\n          }\n        }}\n      >\n        <>\n          {responseStatus && handleError(responseStatus)}\n          <Form>\n            <TextField label=\"Email\" name=\"email\" type=\"email\" validate={emailRequired} />\n            <TextField label=\"密碼\" name=\"password\" type=\"password\" validate={required}/>\n            <p><button type={\"button\"} className=\"link\" onClick={props.onClickForgetForm}>忘記密碼？</button></p>\n            <MainBtn text=\"登入\" type=\"submit\"/>\n          </Form>\n        </>\n      </Formik>\n    </div>\n  )\n};\n\nexport default FormLogin;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { auth, db, storage } from \"../../firebaseAPI\";\nimport { Formik, Form, useFormikContext } from \"formik\";\nimport {confirmPassword, emailRequired, passwordRequired, required} from \"../../tool/validate\";\n\nimport TextField from \"../TextField\";\nimport MainBtn from \"../BtnMain\";\nimport SocialAuth from \"../SocialAuth\";\n\nconst FormRegister = (props) => {\n\n  return (\n    <div className=\"register\">\n      <h1>註冊帳號</h1>\n      {/*<SocialAuth />*/}\n      {/*<p>或者用電子郵件註冊</p>*/}\n      <Formik\n        initialValues={{\n          nickname: '',\n          email: '',\n          password: '',\n          confirmPassword: ''\n        }}\n        onSubmit={async (values, {resetForm}) => {\n          let { email, password, nickname } = values;\n          try {\n            await auth.createUserWithEmailAndPassword(email, password)\n              .then(res => {\n                const defaultImg = \"avatars/default.jpg\";\n                props.handleResponse('success');\n                storage.ref(defaultImg).getDownloadURL()\n                  .then(url => {\n                    db.collection(\"users\").doc(res.user.uid).set({\n                      nickname,\n                      avatar: {\n                        fileLocation: defaultImg,\n                        url: url\n                      }\n                    });\n                  });\n                resetForm({\n                  nickname: '',\n                  email: '',\n                  password: ''\n                });\n              });\n          } catch (error) {\n            props.handleResponse(error.code);\n            resetForm({\n              nickname: '',\n              email: '',\n              password: ''\n            });\n          }\n        }}\n      >\n        {({values}) => (\n          <Form>\n            <TextField label=\"暱稱/稱呼\" name=\"nickname\" type=\"text\" validate={required} />\n            <TextField label=\"Email\" name=\"email\" type=\"email\" validate={emailRequired} />\n            <TextField label=\"密碼\" name=\"password\" type=\"password\" validate={passwordRequired}/>\n            <TextField label=\"確認密碼\" name=\"confirmPassword\" type=\"password\" validate={(value) => confirmPassword(value, values.password)}/>\n            <MainBtn text=\"註冊\" type=\"submit\"/>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  )\n};\n\nexport default FormRegister;\n\n\n","import React from \"react\";\nimport \"./index.scss\";\nimport CloseBtn from \"../BtnClose\";\n\nconst Modal = (props) => {\n  let classN = props.className ? props.className : '';\n\n  if (props.title.length) {\n    return (\n      <>\n        <div className={`modal modal-format ${classN}`}>\n          <div className=\"modal-inner\">\n            <CloseBtn onClick={props.onClick} />\n            <div className=\"modal-header\">\n              <h1>{props.title}</h1>\n            </div>\n            <div className=\"modal-content\">\n              {props.children}\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-overlay\"></div>\n      </>\n    )\n  }\n  return (\n    <>\n      <div className={`modal ${classN}`}>\n        <div className=\"modal-inner\">\n          <CloseBtn onClick={props.onclick} />\n          <div className=\"modal-content\">\n            {props.children}\n          </div>\n        </div>\n      </div>\n      <div className=\"modal-overlay\"></div>\n    </>\n  )\n};\n\nexport default Modal;\n","import React, {useState} from \"react\";\nimport \"./index.scss\";\nimport { auth } from \"../../firebaseAPI\";\nimport Modal from \"../Modal\";\nimport {Form, Formik} from \"formik\";\nimport TextField from \"../TextField\";\nimport MainBtn from \"../BtnMain\";\nimport { emailRequired } from \"../../tool/validate\";\nimport Alert from \"../Alert\";\n\n\n// 提示登入錯誤訊息\nconst handleMsg = res => {\n  switch (res) {\n    case \"success\":\n      return (\n        <Alert className=\"alert-success\">\n          已發送到你的Email\n        </Alert>\n      );\n    case \"auth/user-not-found\":\n      return (\n        <Alert className=\"alert-danger\">\n          沒有符合的註冊Email資訊\n        </Alert>\n      );\n    default:\n      return null\n  }\n};\n\nconst FormForgetPassword = (props) => {\n  const [ responseStatus, setResponseStatus ] = useState(null);\n  return (\n    <Modal className=\"forget-password\" title={\"忘記密碼？\"} onClick={props.onClick}>\n      <p>請輸入當初註冊的Email，我們將會寄一封重設密碼信給您</p>\n      <Formik\n        initialValues={{\n          email: \"\"\n        }}\n        onSubmit={async (values, { resetForm }) => {\n          try {\n            await auth.sendPasswordResetEmail(values.email)\n              .then(() => {\n                setResponseStatus(\"success\");\n                resetForm({\n                  email: '',\n                  password: ''\n                });\n              });\n          } catch (error) {\n            setResponseStatus(error.code);\n            resetForm({\n              email: '',\n              password: ''\n            });\n          }\n        }}\n      >\n        <Form>\n          { responseStatus && handleMsg(responseStatus)}\n          <TextField label={\"Email\"} name={\"email\"} type={\"email\"} validate={emailRequired} />\n          <MainBtn type={\"submit\"} text={\"送出\"} />\n        </Form>\n      </Formik>\n    </Modal>\n  )\n};\n\nexport default FormForgetPassword;\n","import React from \"react\";\nimport \"./index.scss\";\nimport style from \"./login.module.scss\";\nimport LoginForm from \"../../components/FormLogin\";\nimport Register from \"../../components/FormRegister\";\nimport ForgetPassword from \"../../components/FormForgetPassword\";\nimport Modal from \"../../components/Modal\";\nimport {Link} from \"react-router-dom\";\n\nconst ReturnMsg = (props) => {\n  switch (props.code) {\n    case 'success':\n      return (\n        <Modal title=\"歡迎您已成為 Hippo\" onClick={props.onClick}>\n          <p>我們已寄註冊驗證信到你的Email，請您繼續完成驗證。</p>\n          <Link to=\"/\" className=\"btn btn-rounded btn-primary\">回首頁</Link>\n        </Modal>\n      );\n    case 'auth/email-already-in-use':\n      return (\n        <Modal title=\"註冊失敗\" onClick={props.onClick}>\n          <p>這個Email已經是網站會員，沒有辦法重複註冊喔。</p>\n        </Modal>\n      );\n    default:\n      return null\n  }\n};\n\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: \"activeA\",\n      hide: \"groupB\",\n      responseStatus: null,\n      isModalOpen: false,\n      forgetPasswordStatus: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.showForgetPassword = this.showForgetPassword.bind(this);\n    this.handleResponseStatus = this.handleResponseStatus.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n  }\n  handleClick() {\n    this.setState(state => ({\n      active: state.active === \"activeA\" ? \"activeB\" : \"activeA\"\n    }));\n    setTimeout(() => this.setState(state => ({\n      hide: state.hide === \"groupB\" ? \"groupA\" : \"groupB\"\n    })), 400);\n  }\n  showForgetPassword() {\n    this.setState(state => ({\n      forgetPasswordStatus: !state.forgetPasswordStatus\n    }));\n  }\n  handleResponseStatus(res) {\n    this.setState(state => ({\n      responseStatus: res,\n      isModalOpen: true\n    }))\n  }\n  hideModal() {\n    this.setState(state => ({\n      isModalOpen: false\n    }))\n  }\n  render() {\n    let innerClass= `${style.inner} ${this.state.active}`;\n    let groupAClass = this.state.hide === \"groupA\" ? \"hide\" : \"\";\n    let groupBClass = this.state.hide === \"groupB\" ? \"hide\" : \"\";\n    return(\n      <main className=\"container-fluid\">\n        <div className={innerClass}>\n          <div className={`form groupA ${groupAClass}`}>\n            <LoginForm onClickForgetForm={this.showForgetPassword} />\n          </div>\n          <div className={`box groupA ${groupAClass}`}>\n            <div className=\"box-inner\">\n              <h2 className=\"text-white\">你是新成員？</h2>\n              <button\n                type=\"button\"\n                className=\"btn btn-rounded btn-white-outline\"\n                onClick={() => this.handleClick()}\n              >前往註冊</button>\n            </div>\n          </div>\n          <div className={`form groupB ${groupBClass}`}>\n            <Register handleResponse={this.handleResponseStatus}/>\n          </div>\n          <div className={`box groupB ${groupBClass}`}>\n            <div className=\"box-inner\">\n              <h2 className=\"text-white\">你已經有帳號了嗎？</h2>\n              <button\n                type=\"button\"\n                className=\"btn btn-rounded btn-white-outline\"\n                onClick={() => this.handleClick()}\n              >前往登入</button>\n            </div>\n          </div>\n        </div>\n        {this.state.forgetPasswordStatus && <ForgetPassword onClick={this.showForgetPassword} />}\n        {this.state.isModalOpen && <ReturnMsg code={this.state.responseStatus} onClick={this.hideModal} />}\n      </main>\n    )\n  }\n};\n\nexport default LoginPage;\n\n\n\n\n\n","import React, { createRef, useContext }from \"react\";\nimport \"./index.scss\";\nimport style from \"./chatList.module.scss\"\nimport { AuthContext } from \"../../Auth\";\nimport moment from \"moment\";\n\nfunction HandlerDate(d) {\n  const now = moment();\n  const date = moment(+d);\n  const seconds = now.diff(date, \"seconds\");\n  const minutes = now.diff(date, \"minutes\");\n  const hours = now.diff(date, \"hours\");\n  let result;\n\n  if (now.get('date') === date.get('date')) {\n    if (seconds === 0 || seconds === 1) {\n      result = `1秒前`;\n    } else if (seconds <= 60) {\n      result = `${seconds}秒前`;\n    } else if (minutes <= 60) {\n      result = `${minutes}分鐘前`;\n    } else if (hours <= 24) {\n      result = date.format(\"H:mm\");\n    }\n  } else if (hours <= 48) {\n    result = \"昨天\";\n  } else if (hours <= 72) {\n    result = \"前天\";\n  } else {\n    result = date.format(\"MM/DD\");\n  }\n  return result;\n}\n\nconst ChatSummary = (props) => {\n  const { currentUser, currentChatId } = useContext(AuthContext);\n  const chat = props.chat;\n  const date = HandlerDate(chat.last_msg_id);\n  const _class = currentChatId === chat.id ? style['item-active'] : style.item;\n  const id = currentUser.uid;\n\n\n\n  return (\n    <li className={_class} onClick={() => {props.onClick(chat.id)}}>\n      <div className={style.summary}>\n        <div className={style[\"summary-avatar\"]}>\n          <img src={chat.avatar} alt=\"\"/>\n        </div>\n        <h4 className={style[\"summary-name\"]}>{chat.name}\n          {chat.members.length > 2 ? <span>{`(${chat.members.length})`}</span> : null}\n        </h4>\n        <p className={style[\"summary-text\"]}>{chat.last_msg}</p>\n        <div className={style.col}>\n          <div className={style.date}>{date}</div>\n          {chat.unread[id] > 0 ? <span className={style.unread}>{chat.unread[id]}</span> : null}\n        </div>\n      </div>\n    </li>\n  )\n};\n\nclass ChatList extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchHeight: \"auto\",\n      roomHeight: 0,\n      padding: false,\n      search: '',\n      chats: []\n    };\n    this.search = createRef();\n    this.UpdateDimensions = this.UpdateDimensions.bind(this);\n    this.FilterChat = this.FilterChat.bind(this);\n  }\n  componentDidMount() {\n    this.FilterChat();\n    window.addEventListener('resize', this.UpdateDimensions);\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.headerHeight !== nextProps.headerHeight) {\n      this.UpdateDimensions();\n    }\n    return true;\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.UpdateDimensions);\n  }\n  UpdateDimensions() {\n    this.setState({\n      searchHeight: this.search.current.clientHeight,\n    }, function () {\n      this.setState((state) => {\n        return {\n          roomHeight: window.innerHeight - (this.props.headerHeight + state.searchHeight)\n        }\n      });\n    });\n  }\n  FilterChat() {\n    const chats = this.props.chats;\n    const regex = RegExp(this.state.search, 'gi');\n    const newChats = chats.filter(({name}) => regex.test(name));\n\n    this.setState({\n      chats: newChats\n    });\n  }\n  render() {\n    const _chats = this.state.chats.map(chat => <ChatSummary key={chat.id} chat={chat} onClick={this.props.talking}/>);\n\n    return (\n      <section className={`chat-control ${this.props.className}`}>\n        <div className=\"chat-search\" ref={this.search}>\n          <div className=\"input-field\">\n            <label htmlFor=\"roomSearch\">\n              搜尋\n              <i className=\"fa fa-search\"></i>\n            </label>\n            <input id=\"roomSearch\" type=\"text\" onChange={(e) => {\n              this.setState({search: e.target.value}, function () {\n                this.FilterChat();\n              });\n            }} value={this.state.search} />\n          </div>\n          <button className=\"icon-btn\" title=\"排序\"><i className=\"fa fa-sort\"></i></button>\n        </div>\n        <ul className={style.items} style={{height: this.state.roomHeight}}>\n          {_chats.length > 0 ? _chats :\n            <p className=\"text-center pt-5\">找個人聊天吧！</p>\n          }\n        </ul>\n      </section>\n    )\n  }\n}\n\nexport default ChatList;\n\n\n\n","import React, { createRef, useContext} from \"react\";\nimport style from \"./index.module.scss\";\nimport {AuthContext} from \"../../Auth\";\nimport moment from \"moment\";\n\nfunction HandlerDate(d) {\n  const now = moment();\n  const date = moment(+d);\n  const seconds = now.diff(date, \"seconds\");\n  const minutes = now.diff(date, \"minutes\");\n  const hours = now.diff(date, \"hours\");\n  let result;\n\n  if (now.get('date') === date.get('date')) {\n    if (seconds === 0 || seconds === 1) {\n      result = `1秒前`;\n    } else if (seconds <= 60) {\n      result = `${seconds}秒前`;\n    } else if (minutes <= 60) {\n      result = `${minutes}分鐘前`;\n    } else if (hours <= 24) {\n      result = date.format(\"H:mm\");\n    }\n  } else if (hours <= 48) {\n    result = \"昨天\";\n  } else if (hours <= 72) {\n    result = \"前天\";\n  } else {\n    result = date.format(\"MM/DD\");\n  }\n  return result;\n}\n\n// textarea 調整高度\nfunction textareaDimensions(target) {\n  const maxHeight = 150;\n  const _clientHeight = target.clientHeight;\n  const _scrollHeight = target.scrollHeight;\n  let height = _clientHeight < maxHeight ? _scrollHeight : _clientHeight ;\n\n  if (height > maxHeight) {\n    height = maxHeight;\n  }\n\n  return height;\n}\n\nfunction isReaded(readed) {\n  return readed ? \"已讀\" : '';\n}\n\nconst Dialog = (props) => {\n  const { currentUser } = useContext(AuthContext);\n  const currentUid = currentUser.uid;\n  let _className = style[\"dialog\"];\n  const msg = props.msg;\n  const target = props.members.filter(user => user.id === msg.sentBy)[0];\n\n  if (msg.sentBy === currentUid) {\n    _className += \" \" + style[\"local\"]\n  } else {\n    _className += \" \" + style[\"remote\"];\n  }\n\n  return (\n    <div className={_className}>\n      {\n        msg.sentBy !== currentUid && (\n          <div className={style[\"avatar\"]}>\n            <img src={target.avatar.url} alt={target.nickname}/>\n          </div>\n        )\n      }\n      <div className={style[\"say\"]}>{msg.text}</div>\n      <div className={style[\"states\"]}>\n        { msg.sentBy === currentUid && <div>{isReaded(msg.readed)}</div>}\n        <div>{HandlerDate(msg.id)}</div>\n      </div>\n    </div>\n  )\n};\n\nclass ChatSpace extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this._header = createRef();\n    this._chatInputSection = createRef();\n    this.state = {\n      headerHeight: 'auto',\n      inputHeight: 'auto',\n      dialogueHeight: 'auto',\n      value: '',\n      showing: false\n    };\n    this.UpdateDimensions = this.UpdateDimensions.bind(this);\n    this.inputHandle = this.inputHandle.bind(this);\n    this.submitHandle = this.submitHandle.bind(this);\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.UpdateDimensions);\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    // console.log(77, nextState.dialogueHeight == \"auto\", Object.keys(nextProps.current.chat).length > 0);\n    if (nextState.dialogueHeight == \"auto\" && Object.keys(nextProps.current.chat).length > 0 && this._header.current) {\n      this.UpdateDimensions();\n    }\n    return true;\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.UpdateDimensions);\n  }\n  UpdateDimensions() {\n    this.setState({\n      headerHeight: this._header.current.clientHeight\n    }, function () {\n      this.setState(state => ({\n        dialogueHeight: window.innerHeight - (this.props.headerHeight + this._chatInputSection.current.clientHeight + state.headerHeight + 2)\n      }));\n    });\n  }\n  inputHandle(e) {\n    const target = e.target;\n\n    this.setState({\n      value: target.value\n    });\n\n    this.setState({\n      inputHeight: \"auto\"\n    }, function () {\n      this.setState({\n        inputHeight: textareaDimensions(target)\n      });\n      this.UpdateDimensions();\n    });\n  }\n  submitHandle(e) {\n    const { currentUser } = this.context;\n\n    // enter event\n    if (e.nativeEvent.keyCode === 13 || e.nativeEvent.type === \"click\") {\n      e.preventDefault();\n\n       let msg = this.state.value;\n\n       if (typeof msg === \"string\") {\n         msg = msg.trim();\n         if (msg.length > 0) {\n           this.props.AddMessages({\n             text: msg,\n             sentBy: currentUser.uid\n           });\n           this.setState({\n             value: \"\"\n           })\n         }\n       }\n    }\n  }\n  render() {\n    const _className = this.props.className ? \"chat-space \" + this.props.className : \"chat-space\";\n    const { chat, members, dialogue } = this.props.current;\n    let messages = [];\n\n    if (members.length > 0) {\n      messages = dialogue.map(msg => <Dialog key={msg.id} msg={msg} members={members}/>);\n    }\n\n    if (Object.keys(chat).length == 0) {\n      return <section className={_className}></section>\n    }\n\n    return (\n      <section className={_className}>\n        <header ref={this._header} className={style[\"chat-space-header\"]}>\n          <button className={style[\"icon-btn\"]} onClick={this.props.toList}><i className=\"fa fa-chevron-left\"/></button>\n          <h4 className={style[\"user-name\"]}>{ Object.keys(this.props.current.chat).length > 0 ? this.props.current.chat.name : \"...\" }</h4>\n        </header>\n        <div className={style[\"chat-space-body\"]}>\n          <div className={style[\"dialogue\"]} style={{height: this.state.dialogueHeight}}>\n            { messages.length ? messages : null }\n          </div>\n          <div className={style[\"chat-input\"]} ref={this._chatInputSection}>\n            <div className={style[\"chat-input-field\"]}>\n              <textarea\n                rows=\"1\"\n                placeholder=\"輸入訊息\"\n                value={this.state.value}\n                onChange={this.inputHandle}\n                onKeyPress={this.submitHandle}\n                style={{height: this.state.inputHeight}}\n              />\n            </div>\n            <div className={style[\"chat-input-tool\"]}>\n              {/*<button*/}\n              {/*  className={style[\"icon-btn\"]}*/}\n              {/*  title=\"傳送檔案\"*/}\n              {/*>*/}\n              {/*  <i className=\"fa fa-paperclip\"/>*/}\n              {/*</button>*/}\n              {/*<button*/}\n              {/*  className={style[\"icon-btn-emoji\"]}*/}\n              {/*  title=\"emoji\"*/}\n              {/*>*/}\n              {/*  <i className=\"fa fa-smile-o\"/>*/}\n              {/*</button>*/}\n              <button\n                className={style[\"icon-btn-submit\"]}\n                title=\"傳送\"\n                onClick={this.submitHandle}\n              >\n                <i className=\"fa fa-paper-plane\"/>\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n    )\n  }\n}\n\n\nexport default ChatSpace;\n","import React from \"react\";\nimport \"./index.scss\";\nimport ChatList from \"../../components/ChatList\";\nimport ChatSpace from \"../../components/ChatSpace\";\nimport { AuthContext } from \"../../Auth\";\nimport {db} from \"../../firebaseAPI\";\nimport firebase from \"firebase\";\n\nclass Chat extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.users = db.collection('users');\n    this.userChats = db.collection('userChats');\n    this.chats = db.collection('chats');\n    this.chatMessages = db.collection('chatMessages');\n    this.msgListener = [];\n\n    this.state = {\n      padding: true,\n      mobile: null,\n      chatListClass: 'active',\n      chatSpaceClass: '',\n      headerHeight: null,\n      current: {\n        chat: {},\n        members: [],\n        dialogue: []\n      },\n      chats: []\n    };\n\n    this.IsMobile = this.IsMobile.bind(this);\n    this.WindowResize = this.WindowResize.bind(this);\n    this.showChatList = this.showChatList.bind(this);\n    this.showChatSpace = this.showChatSpace.bind(this);\n    this.UpdateDimensions = this.UpdateDimensions.bind(this);\n    this.HandleChangeChatId = this.HandleChangeChatId.bind(this);\n    this.GetChats = this.GetChats.bind(this);\n    this.SetCurrentChat = this.SetCurrentChat.bind(this);\n    this.GetCurrentUsers = this.GetCurrentUsers.bind(this);\n    this.GetCurrentMessages = this.GetCurrentMessages.bind(this);\n    this.AddMessages = this.AddMessages.bind(this);\n    this.GetMessages = this.GetMessages.bind(this);\n  }\n  componentDidMount() {\n    this.IsMobile();\n    this.GetChats().then(state => {\n      if (state) {\n        this.GetMessages();\n        this.HandleChangeChatId();\n      } else {\n        this.setState({\n          padding: false\n        }, () => {\n          this.UpdateDimensions();\n        });\n      }\n    });\n    window.addEventListener('resize', this.WindowResize);\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    // const { currentChatId } = this.context;\n\n    // if (nextState.chats.length > 0 && !currentChatId) {\n    //   this.HandleChangeChatId();\n    // }\n\n    return true;\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.WindowResize);\n  }\n  UpdateDimensions() {\n    this.setState({\n      headerHeight: this.props.header.current.clientHeight\n    })\n  }\n  IsMobile() {\n    const mql = window.matchMedia('(max-width: 700px');\n    this.setState({\n      mobile: mql.matches\n    });\n\n    // this.setState({\n    //   mobile: mql.matches\n    // }, function () {\n    //   if (this.state.mobile) {\n    //     this.setState({\n    //       chatListClass: 'active'\n    //     });\n    //   } else {\n    //     this.setState({\n    //       chatListClass: '',\n    //       chatSpaceClass: ''\n    //     });\n    //   }\n    // });\n  }\n  WindowResize() {\n    this.IsMobile();\n  }\n  showChatList() {\n    this.setState({\n      chatListClass: 'ready',\n      chatSpaceClass: 'active'\n    }, function () {\n      setTimeout(() => {\n        this.setState({\n          chatListClass: 'ready go',\n          chatSpaceClass: 'active go'\n        }, function () {\n          setTimeout(() => {\n            this.setState({\n              chatListClass: 'active',\n              chatSpaceClass: ''\n            });\n          }, 600);\n        })\n      }, 50)\n    });\n  }\n  showChatSpace() {\n    if (!this.state.mobile) return false;\n    console.log(1,8, this.state.mobile);\n\n    this.setState({\n      chatListClass: 'active',\n      chatSpaceClass: 'ready'\n    }, function () {\n      setTimeout(() => {\n        this.setState({\n          chatListClass: 'active go',\n          chatSpaceClass: 'ready go'\n        }, function () {\n          setTimeout(() => {\n            this.setState({\n              chatListClass: '',\n              chatSpaceClass: 'active'\n            });\n          }, 600);\n        })\n      }, 50)\n    })\n  }\n  HandleChangeChatId(chat_id) {\n    const { currentChatId, changeChatId } = this.context;\n    let chatId;\n\n    if (!chat_id && currentChatId) {\n      chatId = currentChatId;\n    } else if (chat_id) {\n      chatId = chat_id;\n    } else {\n      chatId = this.state.chats[0].id;\n    }\n\n    if (chatId !== currentChatId) {\n      changeChatId(chatId);\n    }\n\n    this.setState({\n      current: {\n        chat: {},\n        members: [],\n        dialogue: []\n      },\n    }, async function () {\n      await this.SetCurrentChat(chatId);\n      await this.GetCurrentMessages(chatId);\n\n      this.setState({\n        padding: false\n      }, () => {\n        console.log(2.3);\n        this.showChatSpace();\n        this.UpdateDimensions();\n      });\n    });\n  }\n  GetChats() {\n    const { currentUser } = this.context;\n    const then = this;\n    const chats = [];\n\n    if (this.chatsListener) {\n      this.chatsListener();\n      this.chatsListener = null;\n    }\n\n    return new Promise(resolve => {\n      this.chatsListener = this.chats.where(\"members\", \"array-contains\", currentUser.uid)\n        .onSnapshot(async function (snapshot) {\n          const docChanges = snapshot.docChanges();\n\n          if (docChanges.length > 0) {\n            for (const i in docChanges) {\n              const change = docChanges[i];\n              const chatId = change.doc.id;\n              const chatData = change.doc.data();\n              const chat = {\n                ...chatData,\n                id: chatId\n              };\n\n              if (change.type === 'added') {\n                // 如果是 1by1 狀態，取得 chat 對象資料\n                if (chatData.members.length == 2) {\n                  const targetId = chatData.members.filter(person => person !== currentUser.uid)[0];\n                  const target = await then.users.doc(targetId).get()\n                    .then(userDoc => {\n                      return userDoc.data();\n                    });\n\n                  chat.name = target.nickname;\n                  chat.avatar = target.avatar.url;\n                }\n\n                chats.push(chat);\n\n                // 依最後訊息排序\n                if (chats.length > 1) chats.sort((a, b) => b.last_msg_id - a.last_msg_id);\n              }\n\n              if (change.type === 'modified') {\n                chats.forEach(item => {\n                  if (item.id === chat.id) {\n                    item.unread = chat.unread\n                  }\n                });\n              }\n            }\n            then.setState({\n              chats\n            }, () => {\n              resolve(true);\n              // then.GetMessages();\n              // then.HandleChangeChatId();\n              // then.GetMessages();\n            });\n          } else {\n            resolve(false);\n            // setTimeout(() => {\n            //   then.setState({\n            //     padding: false\n            //   }, () => {\n            //     then.UpdateDimensions();\n            //   })\n            // }, 1000);\n          }\n        });\n    });\n\n\n  }\n  GetMessages() {\n    const then = this;\n    const chats =[...this.state.chats];\n\n\n    if (this.msgListener.length > 0) {\n      this.msgListener.forEach(item => {\n        item();\n      });\n      this.msgListener.length = 0;\n    }\n\n    for (const i in chats) {\n      const chatId = chats[i].id.toString();\n      // let unread = 0;\n      let last_msg = \"\",\n          last_msg_id = \"\";\n      const chatMessages = this.chatMessages.doc(chatId).collection('messages');\n\n      // 每個 chat 的訊息\n      this.msgListener[i] = chatMessages.orderBy(\"created\", \"desc\").limit(1)\n        .onSnapshot(async function (snapshot) {\n          const docChanges = snapshot.docChanges();\n\n          for (const index in docChanges) {\n            const change = docChanges[index];\n            const id = change.doc.id;\n            const msgData = change.doc.data();\n            const msg = {\n              ...msgData,\n              id\n            };\n\n            if (change.type === \"added\") {\n              // 更新 chat 未讀總計\n              // if (msgData.sentBy !== currentUser.uid && !msg.readed) {\n              //   unread++;\n              // }\n\n              // 更新 最新訊息\n              last_msg = msg.text;\n              last_msg_id = msg.id;\n            }\n\n            // if (change.type === \"modified\") {\n            //   unread = 0;\n            // }\n          }\n\n          then.chats.doc(chatId).update({\n            // unread: unread,\n            last_msg: last_msg,\n            last_msg_id: last_msg_id\n          }).then(() => {\n            then.setState(prevState => {\n              const chats = prevState.chats;\n              const index = chats.findIndex(chat => chat.id === chatId);\n              chats[index] = {\n                ...chats[index],\n                // unread: unread,\n                last_msg: last_msg,\n                last_msg_id: last_msg_id\n              };\n\n              chats.sort((a, b) => b.last_msg_id - a.last_msg_id);\n              return {\n                chats: chats\n              }\n            });\n          });\n      });\n    }\n  }\n  SetCurrentChat(id) {\n    const chat = this.state.chats.filter(chat => {\n      return chat.id === id\n    })[0];\n\n    this.setState(state => ({\n      current: {\n        ...state.current,\n        chat: chat\n      }\n    }), () => {\n      this.GetCurrentUsers(this.state.current.chat.members);\n    });\n  }\n  GetCurrentMessages(chatId) {\n    const then = this;\n    const { currentUser, currentChatId } = this.context;\n    const chatMessages = this.chatMessages.doc(chatId.toString()).collection(\"messages\");\n    const _messages = [];\n\n    if (this.currentMsgListener) {\n      this.currentMsgListener();\n      this.currentMsgListener = null;\n    }\n\n    this.currentMsgListener = chatMessages.orderBy(\"created\", \"desc\")\n      .onSnapshot(function (snapshot) {\n        const docChanges = snapshot.docChanges();\n\n        for (const index in docChanges) {\n          const change = docChanges[index];\n          const msgId = change.doc.id;\n          const msgData = change.doc.data();\n\n          if (change.type === 'added') {\n            // 更新 message 未讀 => 已讀\n            if (msgData.sentBy !== currentUser.uid && !msgData.readed) {\n              chatMessages.doc(msgId).update({\n                readed: true\n              });\n              then.chats.doc(currentChatId).update({\n                [\"unread.\" + currentUser.uid]: 0\n              });\n            }\n            _messages.push({\n              ...msgData,\n              id: msgId\n            });\n          }\n\n          if (change.type === \"modified\") {\n            const i = _messages.findIndex(msg => msg.id == msgId);\n            _messages[i] = {\n              ...msgData,\n              id: msgId\n            };\n          }\n        }\n        _messages.sort((a, b) => b.id - a.id);\n\n        then.setState(prevState => ({\n          current: {\n            ...prevState.current,\n            dialogue: _messages\n          }\n        }));\n    });\n\n  }\n  async GetCurrentUsers(users) {\n    const _users = [];\n\n    for (const i in users) {\n      await this.users.doc(users[i]).get()\n        .then(userDoc => {\n          _users.push({\n            ...userDoc.data(),\n            id: userDoc.id\n          });\n        });\n    }\n\n    this.setState(prevState => ({\n      current: {\n        ...prevState.current,\n        members: _users\n      }\n    }));\n  }\n  AddMessages(dialog) {\n    const { currentUser,  currentChatId } = this.context;\n    const msgId = Date.now().toString();\n    const target = this.state.current.members.filter(person => person.id !== currentUser.uid)[0];\n\n    this.chatMessages.doc(currentChatId.toString()).collection(\"messages\").doc(msgId)\n      .set({\n        type: 1,\n        text: \"\",\n        imgs: [],\n        readed: false,\n        created: firebase.firestore.FieldValue.serverTimestamp(),\n        ...dialog\n      });\n    this.chats.doc(currentChatId).update({\n      [\"unread.\" + target.id]: firebase.firestore.FieldValue.increment(+1)\n    });\n  }\n  render() {\n    if (this.state.padding) return <div className=\"pt-5 text-center\">Loading...</div>\n    return (\n      <main className=\"chat\">\n        <div className=\"chat-row\">\n          <ChatList\n            className={this.state.chatListClass}\n            headerHeight={this.state.headerHeight}\n            talking={this.HandleChangeChatId}\n            chats={this.state.chats}\n          />\n          <ChatSpace\n            className={this.state.chatSpaceClass}\n            headerHeight={this.state.headerHeight}\n            toList={this.showChatList}\n            current={this.state.current}\n            AddMessages={this.AddMessages}\n          />\n        </div>\n      </main>\n    )\n  }\n}\n\nexport default Chat;\n","import React, { createRef } from \"react\";\nimport style from \"./index.module.scss\";\nimport { storage, db } from \"../../firebaseAPI\";\nimport {AuthContext} from \"../../Auth\";\n\nclass AvatarUpdate extends React.Component {\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      imgFileLocal: null,\n      imgUrl: null\n    };\n    this.ChangeFile = this.ChangeFile.bind(this);\n    this.CheckImgSize = this.CheckImgSize.bind(this);\n    this.HandlerImg = this.HandlerImg.bind(this);\n    this.Compression = this.Compression.bind(this);\n    this.SetUserAvatar = this.SetUserAvatar.bind(this);\n    this.DeleteUserAvatar = this.DeleteUserAvatar.bind(this);\n    this._file = createRef();\n    this._canvas = createRef();\n    this.users = db.collection(\"users\");\n  }\n  componentDidMount() {\n    const { currentUser } = this.context;\n    if (currentUser) {\n      this.users.doc(currentUser.uid).get()\n        .then(res => {\n          this.setState({\n            imgFileLocal: res.data().avatar.fileLocation,\n            imgUrl: res.data().avatar.url\n          },function () {\n            this.HandlerImg(this.state.imgUrl);\n          });\n        });\n    }\n  }\n  ChangeFile() {\n    const reader = new FileReader();\n    const files = this._file.current.files[0];\n\n    if (typeof files !== \"undefined\") {\n      if (this.CheckImgSize(files.size)) {\n        reader.readAsDataURL(files);\n        reader.onload = () => {\n          const url = reader.result;\n          if (url.length > 0) {\n            this.HandlerImg(url, files);\n          }\n        }\n      } else {\n        this._file.current.value = \"\";\n      }\n    }\n  }\n  CheckImgSize(size) {\n    const maxBytes = 10485760;\n    const stok = Math.ceil(size / 1024);\n    const mtok = Math.ceil(maxBytes / 1024);\n\n    if (size > maxBytes) {\n      alert(`您所選擇的檔案大小為 ${stok}KB，已超過上傳上限。(檔案上限：${mtok}KB。)`);\n      return false;\n    } else {\n      return true;\n    }\n  }\n  HandlerImg(url, file) {\n    let dx, dy;\n    const dpi = 2;\n    // 預期為 1:1 正方形尺寸\n    const viewDimensions = 100 * dpi;\n    const canvas = this._canvas.current;\n    const then = this;\n\n    if (canvas.getContext) {\n      const _img = new Image();\n\n      _img.src = url;\n      _img.onload = function() {\n        const ctx = canvas.getContext('2d');\n        const { width, height } = then.ImgDimensions(_img, viewDimensions);\n        canvas.width = viewDimensions;\n        canvas.height = viewDimensions;\n\n        dx = (width - canvas.width) / -2;\n        dy = (height - canvas.height) / -2;\n\n        ctx.drawImage(this, dx, dy, width, height);\n        if (file) then.Compression(file);\n      }\n    }\n  }\n  ImgDimensions(img, viewDimensions) {\n    let scale, mate;\n    let { width, height } = img;\n    const minSize = Math.min(width, height);\n    const maxSize = Math.min(width, height);\n\n    if (width === height && width == viewDimensions) {\n      // 已經調整過或是符合尺寸\n      return {width, height};\n    } else if (viewDimensions >= maxSize) {\n      mate = maxSize;\n    } else {\n      mate = minSize;\n    }\n\n    switch (mate) {\n      case width:\n        scale = width / height;\n        width = viewDimensions;\n        height = height / scale;\n        break;\n      default:\n        scale = height / viewDimensions;\n        width = width / scale;\n        height = viewDimensions;\n        break;\n    }\n\n    return {\n      width,\n      height\n    };\n  }\n  Compression(file) {\n    const then = this;\n    this._canvas.current.toBlob(function (blob) {\n      let fileName = file.name.replace(/(.+)(\\.(jpg|jpeg|png))$/gi, Date.now() + '$2')\n\n      const local = \"avatars/\" + fileName;\n      const ref = storage.ref(local);\n\n      ref.put(blob).then(snapshot => {\n        then.SetUserAvatar(local);\n      });\n    }, file.type, .9);\n  }\n  async SetUserAvatar(local) {\n    const { currentUser } = this.context;\n    if (this.state.imgFileLocal && this.state.imgFileLocal !== \"avatars/default.jpg\") {\n      await this.DeleteUserAvatar();\n    }\n    storage.ref(local).getDownloadURL()\n      .then(url => {\n        this.users.doc(currentUser.uid).update({\n          avatar: {\n            fileLocation: local,\n            url\n          }\n        })\n          .then(() => {\n            this.setState({\n              imgFileLocal: local,\n              imgUrl: url\n            })\n          });\n      });\n  }\n  DeleteUserAvatar() {\n    storage.ref(this.state.imgFileLocal).delete();\n  }\n  render () {\n    return (\n      <div className={style.avatar}>\n        <div className={style[\"img-frame\"]}>\n          <canvas ref={this._canvas}></canvas>\n        </div>\n        <div className=\"d-none\">\n          <input\n            ref={this._file}\n            type=\"file\"\n            name=\"avatar\"\n            id=\"avatar\"\n            accept=\"image/png, image/jpeg\"\n            onChange={this.ChangeFile}\n          />\n        </div>\n        <button className={style['avatar-btn']} onClick={()=> this._file.current.click()}>編輯</button>\n      </div>\n    )\n  }\n}\n\n\nexport default AvatarUpdate;\n","import React from \"react\";\nimport \"./index.scss\";\nimport style from \"./account.module.scss\";\nimport { auth, db } from \"../../firebaseAPI\";\nimport { Formik, Form } from \"formik\";\nimport TextField from \"../../components/TextField\";\nimport { required } from \"../../tool/validate\";\nimport AvatarUpdate from \"../../components/AvatarUpdate\";\nimport { AuthContext } from \"../../Auth\";\n\n\nconst EditArea = (props) => {\n  if (props.isEdit) {\n    return (\n      <div className=\"col-12 nickname\">\n        <Formik\n          initialValues={{\n            nickname: \"\"\n          }}\n          onSubmit={(values, {resetForm}) => {\n            const user = auth.currentUser;\n            db.collection(\"users\").doc(user.uid).update({\n              nickname: values.nickname\n            }).then(() => {\n              props.getUserInfo();\n              resetForm({\n                nickname: \"\"\n              });\n              props.onClick();\n            })\n          }}\n        >\n          <Form className={style[\"input-field\"]}>\n            <TextField label=\"暱稱/稱呼\" name=\"nickname\" type=\"text\" validate={required} />\n            <button type=\"submit\" className=\"btn\">確認</button>\n          </Form>\n        </Formik>\n      </div>\n    )\n  } else {\n    return (\n      <>\n        <div className=\"col-3\">\n          <p className=\"label\">稱呼</p>\n        </div>\n        <div className=\"col-9 nickname\">\n          <p className=\"value pr-4\">{props.nickname ? props.nickname : \"nobody\"}</p>\n          <button className=\"btn btn-sm\" onClick={props.onClick}>編輯</button>\n        </div>\n      </>\n    )\n  }\n};\n\n\nclass Account extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: null,\n      nickname: null,\n      isEdit: false\n    };\n    this.getUserInfo = this.getUserInfo.bind(this);\n    this.handlerClick = this.handlerClick.bind(this);\n  }\n  getUserInfo() {\n    const { currentUser } = this.context;\n    const then = this;\n    db.collection('users').doc(currentUser.uid).get()\n      .then(res => {\n        const data = res.data();\n        then.setState({\n          email: currentUser.email,\n          nickname: data.nickname\n        })\n      });\n  }\n  handlerClick() {\n    this.setState(state => ({\n      isEdit: !state.isEdit\n    }))\n  }\n  componentDidMount() {\n    this.getUserInfo();\n  }\n  render(){\n    return (\n      <main className=\"account bg-secondary\">\n        <div className=\"container\">\n          <h1 className=\"text-center\">會員資料</h1>\n          <div className=\"account-content\">\n            <AvatarUpdate />\n            <div className=\"row\">\n              <EditArea nickname={this.state.nickname} getUserInfo={this.getUserInfo} isEdit={this.state.isEdit} onClick={this.handlerClick} />\n            </div>\n            <div className=\"row\">\n              <div className=\"col-3\">\n                <p className=\"label\">Email</p>\n              </div>\n              <div className=\"col-9\">\n                <p className=\"value\">{this.state.email}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    )\n  }\n}\n\nexport default Account;\n","import React from \"react\";\nimport style from \"./index.module.scss\"\n\nconst CardMember = (props) => {\n  const person = props.person;\n  return (\n    <div className={style.card}>\n      <div className={style[\"img-frame\"]}>\n        <img src={person.avatar} alt={person.name}/>\n      </div>\n      <div className={style[\"card-body\"]}>\n        <h3 className={style[\"card-title\"]}>{person.nickname}</h3>\n        <button className={style.btn} onClick={() => props.onClick(props.id)}>聊天</button>\n      </div>\n    </div>\n  )\n};\n\nexport default CardMember;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { db } from \"../../firebaseAPI\";\nimport CardMember from \"../../components/CardMember\";\nimport { AuthContext } from \"../../Auth\";\n\n\nclass Members extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.users = db.collection(\"users\");\n    this.userChats = db.collection(\"userChats\");\n    this.state = {\n      members: []\n    };\n    this.createChat = this.createChat.bind(this);\n    this.getMembers = this.getMembers.bind(this);\n\n  }\n  componentDidMount() {\n    this.users.get()\n      .then(this.getMembers);\n  }\n  componentWillUnmount() {\n  }\n  getMembers(querySnapshot) {\n    const { currentUser } = this.context;\n    const _members = [];\n\n    querySnapshot.forEach(function (user) {\n      const data = user.data();\n      if (currentUser && currentUser.uid === user.id) { return false }\n      _members.push({\n        id: user.id,\n        nickname: data.nickname,\n        avatar: data.avatar.url\n      });\n    });\n\n    this.setState({\n      members: _members\n    });\n  }\n  async createChat(id) {\n    const { currentUser, changeChatId } = this.context;\n    const userChats = db.collection('userChats');\n\n    if ( currentUser ) {\n      const chats = db.collection('chats');\n      const myselfIsFirst = await userChats.doc(currentUser.uid).get()\n        .then(doc => {\n          if (!doc.exists) return false;\n          return Object.keys(doc.data()).includes(id)\n        });\n      const targetIsFirst = await userChats.doc(currentUser.uid).get()\n        .then(doc => {\n          if (!doc.exists) return false;\n          return Object.keys(doc.data()).includes(currentUser.uid)\n        });\n\n      if (!myselfIsFirst && !targetIsFirst) {\n        chats.add({\n          name: null,\n          avatar: null,\n          members: [currentUser.uid, id],\n          last_msg_id: null,\n          unread: {\n            [currentUser.uid]: 0,\n            [id]: 0\n          }\n        })\n          .then(docRef => {\n            const chatId = docRef.id;\n            userChats.doc(currentUser.uid).set({\n              [id]: chatId,\n            }, {merge: true});\n            userChats.doc(id).set({\n              [currentUser.uid]: chatId,\n            }, {merge: true});\n            changeChatId(chatId);\n            this.props.history.push('/chat');\n          });\n      } else {\n        this.userChats.doc(currentUser.uid).get()\n          .then(doc => {\n            if (doc.exists) {\n              changeChatId(doc.data()[id]);\n              this.props.history.push('/chat');\n            }\n          });\n      }\n    } else {\n      this.props.history.push('/login');\n    }\n  }\n  render() {\n    const _members = this.state.members.map(member => (\n      <div key={member.id} className=\"col-6 col-md-4 col-lg-3\">\n        <CardMember id={member.id} person={member} onClick={this.createChat} />\n      </div>\n    ));\n    return (\n      <main className=\"members bg-secondary\">\n        <div className=\"container\">\n          <div className=\"row\">\n            {_members}\n          </div>\n        </div>\n      </main>\n    )\n  }\n}\n\nexport default Members;\n","import React, {createRef} from 'react';\nimport {\n  HashRouter as Router,\n  // BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport \"./index.scss\";\nimport AuthProvider from \"../../Auth\";\nimport PrivateRoute from \"../../PrivateRoute\";\nimport Header from \"../../components/Header\";\nimport LoginPage from \"../LoginPage\";\nimport Chat from \"../Chat\";\nimport Account from \"../Account\";\nimport Members from \"../Members\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this._header = createRef();\n  }\n  render() {\n    return (\n      <AuthProvider>\n        <Router\n        >\n          <>\n            <Header headerRef={this._header}/>\n            <Switch>\n              <Route exact path=\"/\" component={Members}/>\n              <Route exact path=\"/login\" component={LoginPage}/>\n              <PrivateRoute exact path=\"/chat/\" props={{header: this._header}} component={Chat}/>\n              <PrivateRoute exact path=\"/account\" component={Account} />\n            </Switch>\n          </>\n        </Router>\n      </AuthProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. Index is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./views/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"./firebaseAPI\";\nimport \"./sass/style.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}