{"version":3,"sources":["components/ChatSpace/index.module.scss","components/Header/index.module.scss","components/ChatList/chatList.module.scss","components/TextField/index.module.scss","components/CardMember/index.module.scss","components/BtnBurgerMenu/index.module.scss","components/AvatarUpdate/index.module.scss","components/BtnLogout/index.module.scss","views/LoginPage/login.module.scss","components/SocialAuth/img/facebook-f-brands.svg","components/SocialAuth/img/google-brands.svg","components/SocialAuth/img/github-brands.svg","views/Account/account.module.scss","firebaseAPI.js","Auth.js","PrivateRoute.js","components/BtnBurgerMenu/index.js","components/BtnLogout/index.js","components/Header/index.js","tool/validate.js","components/TextField/index.js","components/BtnMain/index.js","components/SocialAuth/index.js","components/BtnClose/index.js","components/Alert/index.js","components/FormLogin/index.js","components/FormRegister/index.js","components/Modal/index.js","components/FormForgetPassword/index.js","views/LoginPage/index.js","components/ChatList/index.js","components/ChatSpace/index.js","views/Chat/index.js","components/AvatarUpdate/index.js","views/Account/index.js","components/CardMember/index.js","views/Members/index.js","views/App/index.js","serviceWorker.js","index.js"],"names":["module","exports","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","db","storage","AuthContext","React","createContext","AuthProvider","props","setCurrentChatId","bind","state","currentUser","currentChatId","padding","changeChatId","onAuthStateChanged","user","setState","id","this","Provider","value","children","Component","PrivateRoute","RouteComponent","component","rest","useContext","render","routeProps","to","BtnBurgerMenu","_className","style","active","push","join","className","type","onClick","BtnLogout","logout","aria-label","signOut","alert","Menus","Header","menuActive","navClass","nav","handlerClick","header","ref","headerRef","navbar","emailRequired","error","test","passwordRequired","length","required","TextField","label","useField","field","meta","input","writing","htmlFor","name","touched","BtnMain","onChange","text","getAuthProvider","providerName","provider","GoogleAuthProvider","FacebookAuthProvider","GithubAuthProvider","EmailAuthProvider","e","preventDefault","signInWithPopup","then","res","console","log","catch","err","SocialAuth","src","fb","alt","google","github","BtnClose","aria-hidden","Alert","useState","hide","setHide","role","hasCloseBtn","FormLogin","history","useHistory","responseStatus","setResponseStatus","initialValues","email","password","onSubmit","values","a","resetForm","signInWithEmailAndPassword","code","Err","handleError","validate","onClickForgetForm","FormRegister","nickname","confirmPassword","createUserWithEmailAndPassword","handleResponse","getDownloadURL","url","collection","doc","uid","set","avatar","fileLocation","Modal","classN","title","onclick","FormForgetPassword","sendPasswordResetEmail","handleMsg","ReturnMsg","LoginPage","isModalOpen","forgetPasswordStatus","handleClick","showForgetPassword","handleResponseStatus","hideModal","setTimeout","innerClass","inner","groupAClass","groupBClass","ChatSummary","chat","date","d","result","now","moment","seconds","diff","minutes","hours","get","format","HandlerDate","last_msg_id","_class","item","summary","members","last_msg","col","unread","ChatList","searchHeight","roomHeight","search","createRef","UpdateDimensions","window","addEventListener","nextProps","nextState","headerHeight","removeEventListener","current","clientHeight","innerHeight","_chats","chats","map","key","talking","items","height","contextType","textareaDimensions","target","_clientHeight","_scrollHeight","scrollHeight","Dialog","currentUid","msg","filter","sentBy","readed","ChatSpace","_header","_chatInputSection","inputHeight","dialogueHeight","showing","inputHandle","submitHandle","Object","keys","context","nativeEvent","keyCode","trim","AddMessages","dialogue","messages","toList","rows","placeholder","onKeyPress","Chat","users","userChats","chatMessages","msgListener","mobile","chatListClass","chatSpaceClass","IsMobile","WindowResize","showChatList","showChatSpace","HandleChangeChatId","GetChats","SetCurrentChat","GetCurrentUsers","GetCurrentMessages","GetMessages","mql","matchMedia","matches","chat_id","chatId","chatsListener","Promise","resolve","where","onSnapshot","snapshot","docChanges","i","change","chatData","data","targetId","person","userDoc","sort","b","forEach","toString","orderBy","limit","index","msgData","update","prevState","findIndex","_messages","currentMsgListener","msgId","_users","dialog","Date","imgs","created","firestore","FieldValue","serverTimestamp","increment","AvatarUpdate","imgFileLocal","imgUrl","ChangeFile","CheckImgSize","HandlerImg","Compression","SetUserAvatar","DeleteUserAvatar","_file","_canvas","reader","FileReader","files","size","readAsDataURL","onload","stok","Math","ceil","mtok","maxBytes","file","dx","dy","viewDimensions","width","canvas","getContext","_img","Image","ctx","ImgDimensions","drawImage","img","scale","minSize","min","maxSize","toBlob","blob","local","replace","put","delete","accept","click","EditArea","isEdit","getUserInfo","Account","CardMember","card","btn","Members","createChat","getMembers","querySnapshot","_members","exists","includes","myselfIsFirst","targetIsFirst","add","docRef","merge","member","App","Auth","exact","path","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.38f70222.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat-space-header\":\"ChatSpace_chat-space-header__2KspR\",\"user-name\":\"ChatSpace_user-name__IXPIh\",\"dialogue\":\"ChatSpace_dialogue__200KM\",\"dialog\":\"ChatSpace_dialog__Y1UlP\",\"avatar\":\"ChatSpace_avatar__1yLxO\",\"say\":\"ChatSpace_say__3Z6ln\",\"states\":\"ChatSpace_states__1yjFX\",\"remote\":\"ChatSpace_remote__3W4AV\",\"local\":\"ChatSpace_local__etFqx\",\"chat-input\":\"ChatSpace_chat-input__qy9e_\",\"chat-input-field\":\"ChatSpace_chat-input-field__1Y3dG\",\"chat-input-tool\":\"ChatSpace_chat-input-tool__251Xc\",\"icon-btn\":\"ChatSpace_icon-btn__lL0fl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__MbTxY\",\"fixed\":\"Header_fixed__1bXSb\",\"nav\":\"Header_nav__1qWb_\",\"navbar\":\"Header_navbar__2AxSS\",\"navbar-brand\":\"Header_navbar-brand__1iGbD\",\"nav-link\":\"Header_nav-link__3l94V\",\"burger-menu\":\"Header_burger-menu__LVpEC\",\"nav-active\":\"Header_nav-active__1GPcU Header_nav__1qWb_\",\"nav-item\":\"Header_nav-item__pKk_k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"chatList_row__3bObz\",\"items\":\"chatList_items__3zMAM\",\"item\":\"chatList_item__1rPCt\",\"item-active\":\"chatList_item-active__2o27v chatList_item__1rPCt\",\"summary\":\"chatList_summary__2ovCu\",\"summary-avatar\":\"chatList_summary-avatar__1ZWJk\",\"summary-content\":\"chatList_summary-content__CeFAJ\",\"summary-name\":\"chatList_summary-name__1panW\",\"summary-text\":\"chatList_summary-text__tnoDO\",\"col\":\"chatList_col__1WcEy\",\"date\":\"chatList_date__2o34K\",\"unread\":\"chatList_unread__3Z-K-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"text-field\":\"TextField_text-field__1iIu4\",\"input-field\":\"TextField_input-field__dxXZa\",\"label\":\"TextField_label__uKNDo\",\"input\":\"TextField_input__2ZaZ2\",\"writing\":\"TextField_writing__3Hr-C\",\"invalid-feedback\":\"TextField_invalid-feedback__20671\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"CardMember_card__reP1O\",\"card-body\":\"CardMember_card-body__35bMZ\",\"card-title\":\"CardMember_card-title__1uNMn\",\"img-frame\":\"CardMember_img-frame__1y8lU\",\"btn\":\"CardMember_btn__3JmXv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn-menu\":\"BtnBurgerMenu_btn-menu__t-cWL\",\"btn-menu-active\":\"BtnBurgerMenu_btn-menu-active__3i2eE\",\"burger-inner\":\"BtnBurgerMenu_burger-inner__mXelr\",\"burger-box\":\"BtnBurgerMenu_burger-box__gcWop\",\"burger-menu\":\"BtnBurgerMenu_burger-menu__3KtR7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"AvatarUpdate_avatar__2ymA7\",\"avatar-btn\":\"AvatarUpdate_avatar-btn__2IZBr\",\"img-frame\":\"AvatarUpdate_img-frame___aoDr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"logout\":\"BtnLogout_logout__1V49j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inner\":\"login_inner__2y96n\"};","module.exports = __webpack_public_path__ + \"static/media/facebook-f-brands.53757d93.svg\";","module.exports = __webpack_public_path__ + \"static/media/google-brands.da3a9ed4.svg\";","module.exports = __webpack_public_path__ + \"static/media/github-brands.ec5bc1b3.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input-field\":\"account_input-field__X1-Jj\"};","import * as firebase from \"firebase\";\n\nconst config = {\n  apiKey: \"AIzaSyADu9CWQ78aswvnNtVhxK-W-T9av4g2jt0\",\n  authDomain: \"hippo-chat-17580.firebaseapp.com\",\n  databaseURL: \"https://hippo-chat-17580.firebaseio.com\",\n  projectId: \"hippo-chat-17580\",\n  storageBucket: \"hippo-chat-17580.appspot.com\",\n  messagingSenderId: \"285407145365\",\n  appId: \"1:285407145365:web:97f559eb273b6d11241a9c\",\n  measurementId: \"G-2WWKLLKNC4\"\n};\n\nfirebase.initializeApp(config);\n\nexport const auth = firebase.auth();\nexport const db = firebase.firestore();\nexport const storage = firebase.storage();\n\n\n\n\n","import React from \"react\";\nimport { auth } from \"./firebaseAPI\";\n\nexport const AuthContext = React.createContext();\n\nclass AuthProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.setCurrentChatId = this.setCurrentChatId.bind(this);\n    this.state = {\n      currentUser: null,\n      currentChatId: null,\n      padding: true,\n      changeChatId: this.setCurrentChatId\n    };\n  }\n  componentDidMount() {\n    auth.onAuthStateChanged((user) => {\n      this.setState({\n        currentUser: user,\n        padding: false\n      })\n    })\n  }\n  setCurrentChatId(id) {\n    this.setState({\n      currentChatId: id\n    });\n  }\n  render() {\n    if (this.state.padding) {\n      return <>Loading...</>\n    }\n\n    return (\n      <AuthContext.Provider\n        value={this.state}\n      >\n        {this.props.children}\n      </AuthContext.Provider>\n    )\n  }\n}\n\nexport default AuthProvider;\n","import React, { useContext } from \"react\";\nimport {\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport { AuthContext } from \"./Auth\";\n\nconst PrivateRoute = ({component: RouteComponent, ...rest}) => {\n  const { currentUser } = useContext(AuthContext);\n\n  return (\n    <Route\n      {...rest}\n      render={routeProps => !!currentUser ? (\n        <RouteComponent {...routeProps} {...rest.props}/>\n      ) : (\n        <Redirect to={\"/login\"} />\n      )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n","import React from \"react\";\nimport style from \"./index.module.scss\";\n\nconst BtnBurgerMenu = (props) => {\n  let _className = [style[\"btn-menu\"]];\n\n  if (props.active) _className.push(style[\"btn-menu-active\"]);\n\n  _className = _className.join(\" \");\n\n  if (props.className) _className += \" \" + props.className;\n\n  return (\n    <button type=\"button\" className={_className} onClick={props.onClick}>\n      <div className={style[\"burger-box\"]}>\n        <div className={style[\"burger-inner\"]}></div>\n      </div>\n    </button>\n  )\n};\n\nexport default BtnBurgerMenu;\n\n\n","import React from \"react\";\nimport style from \"./index.module.scss\";\nimport { auth } from \"../../firebaseAPI\";\n\nconst BtnLogout = (props) => {\n  return (\n    <button\n      className={style.logout}\n      type=\"button\"\n      aria-label=\"logout\"\n      onClick={() => {\n        if (props.onClick) {\n          props.onClick();\n        }\n        auth.signOut();\n        alert('已登出');\n      }}\n    >\n      登出\n    </button>\n  )\n};\n\nexport default BtnLogout;\n","import React, {useContext} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport style from \"./index.module.scss\";\nimport BurgerMenuIcon from \"../BtnBurgerMenu\";\nimport LogoutBtn from \"../BtnLogout\";\nimport { AuthContext } from \"../../Auth\";\n\nconst Menus = (props) => {\n  const { currentUser, changeChatId } = useContext(AuthContext);\n  if (currentUser) {\n    return (\n      <>\n        <li className={style[\"nav-item\"]}>\n          <Link\n            to=\"/chat\"\n            className={style[\"nav-link\"]}\n            onClick={() => {\n              changeChatId(\"\");\n              props.onClick();\n            }}\n          >Chat</Link>\n        </li>\n        <li className={style[\"nav-item\"]}>\n          <Link\n            to=\"/account\"\n            className={style[\"nav-link\"]}\n            onClick={props.onClick}\n          >帳號</Link>\n        </li>\n        <li className={style[\"nav-item\"]}>\n          <LogoutBtn onClick={props.onClick}/>\n        </li>\n      </>\n    );\n  }\n  return (\n    <>\n      <li className={style[\"nav-item\"]}>\n        <Link to=\"/login\" className={style[\"nav-link\"]}>登入/註冊</Link>\n      </li>\n    </>\n  )\n};\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      menuActive: false,\n      navClass: style.nav\n    };\n    this.handlerClick = this.handlerClick.bind(this);\n  }\n\n  handlerClick() {\n    this.setState(state => ({\n      menuActive: !state.menuActive,\n      navClass: !state.menuActive ? style['nav-active'] : style.nav\n    }));\n  }\n\n  render() {\n    return (\n      <header className={style.header} ref={this.props.headerRef}>\n        <nav className={style.navbar}>\n          <Link to=\"/\" className={style[\"navbar-brand\"]}>Hippo chat</Link>\n          <ul className={this.state.navClass}>\n            <Menus onClick={this.handlerClick}/>\n          </ul>\n          <BurgerMenuIcon className={style[\"burger-menu\"]} active={this.state.menuActive} onClick={() => this.handlerClick()}/>\n        </nav>\n      </header>\n    )\n  }\n}\n\nexport default Header;\n","// 驗證EMAIL(必填、格式)\nexport const emailRequired = (value) => {\n  let error;\n  if (!value) {\n    error = '必填'\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(value)) {\n    error = '無效的Email格式';\n  }\n  return error;\n};\n\n// 驗證密碼(必填、格式)\nexport const passwordRequired = (value) => {\n  let error;\n  if (!value) {\n    error = '必填';\n  } else if (value.length < 6) {\n    error = '密碼太短囉';\n  } else if (!/[A-Z]{1,}/i.test(value)) {\n    error = '至少要一個字母';\n  }\n  return error;\n};\n\n// 驗證是否必填\nexport const required = (value) => {\n  let error;\n  if (!value) {\n    error = '必填';\n  }\n  return error;\n};\n\nexport const confirmPassword = (value, password) => {\n  let error;\n  if (!value) {\n    error = '必填';\n  } else if (value !== password) {\n    error = \"密碼不相符\";\n  }\n  return error;\n};\n","import React from \"react\";\nimport style from \"./index.module.scss\";\nimport { useField, Field } from \"formik\";\n\n\nconst TextField = ({label, ...props}) => {\n  const [field, meta] = useField(props);\n  let _className = [style.input];\n  if (meta.value && meta.value.length > 0) _className.push(style.writing);\n  _className = _className.join(\" \");\n  return (\n    <div className={style[\"text-field\"]}>\n      <div className={style[\"input-field\"]}>\n        <Field className={_className} {...field} {...props}/>\n        <label htmlFor={props.name} className={style.label}>{label}</label>\n      </div>\n      { meta.touched && meta.error ? (<div className={style[\"invalid-feedback\"]}>{meta.error}</div>) : null}\n    </div>\n  )\n};\n\n\nexport default TextField;\n","import React from \"react\";\nimport \"./index.scss\";\n\nconst BtnMain = (props) => {\n  return (\n    <button type={props.type || \"button\"} className=\"main-btn\" onChange={props.onChange}>\n      <span>{props.text}</span>\n    </button>\n  )\n};\n\nexport default BtnMain;\n","import React from \"react\";\nimport \"./index.scss\";\nimport fb from \"./img/facebook-f-brands.svg\";\nimport google from \"./img/google-brands.svg\";\nimport github from \"./img/github-brands.svg\";\nimport firebase from \"firebase\";\nconst getAuthProvider = (providerName) => {\n  let provider = null;\n  switch(providerName) {\n    case 'google':\n      provider = new firebase.auth.GoogleAuthProvider();\n      break;\n    case 'facebook':\n      provider = new firebase.auth.FacebookAuthProvider();\n      break;\n    case 'github':\n      provider = new firebase.auth.GithubAuthProvider();\n      break;\n    case 'email':\n      provider = new firebase.auth.EmailAuthProvider();\n      break;\n  }\n  return provider\n}\n\nconst auth = (e, providerName) => {\n  const auth = firebase.auth();\n  const provider = getAuthProvider(providerName);\n  e.preventDefault();\n  auth.signInWithPopup(provider)\n    .then(res => console.log(res))\n    .catch(err => console.log(err));\n}\n\nconst googleAuth = (e) => {\n  const auth = firebase.auth();\n  const provider = getAuthProvider('google');\n  e.preventDefault();\n  auth.signInWithPopup(provider)\n    .then(res => console.log(res))\n    .catch(err => console.log(err));\n};\n\nconst facebookAuth = (e) => {\n  const auth = firebase.auth();\n  const provider = getAuthProvider('facebook');\n  e.preventDefault();\n  auth.signInWithPopup(provider)\n    .then(res => console.log(res))\n    .catch(err => console.log(err));\n};\n\nconst githubAuth = (e) => {\n  const auth = firebase.auth();\n  const provider = getAuthProvider('google');\n  e.preventDefault();\n  auth.signInWithPopup(provider)\n    .then(res => console.log(res))\n    .catch(err => console.log(err));\n};\n\n\n\nconst SocialAuth = () => {\n\n  return (\n    <ul className=\"social-media\">\n      <li className=\"social-media-item fb\">\n        <button className=\"social-media-link\" onClick={e => {auth(e, 'facebook')}}>\n          <img src={fb} alt=\"facebook\"/>\n        </button>\n      </li>\n      <li className=\"social-media-item google\">\n        <button className=\"social-media-link\" onClick={e => {auth(e, 'google')}}>\n          <img src={google} alt=\"facebook\"/>\n        </button>\n      </li>\n      <li className=\"social-media-item github\">\n        <button className=\"social-media-link\" onClick={e => auth(e, 'github')}>\n          <img src={github} alt=\"facebook\"/>\n        </button>\n      </li>\n    </ul>\n  )\n};\n\nexport default SocialAuth;\n\n\n","import React from \"react\";\nimport \"./index.scss\";\n\nconst BtnClose = (props) => {\n  return (\n    <button\n      className=\"close\"\n      type=\"button\"\n      aria-label=\"close\"\n      onClick={props.onClick}\n    >\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  )\n};\n\nexport default BtnClose;\n","import React, { useState } from \"react\";\nimport \"./index.scss\";\nimport CloseBtn from \"../BtnClose\";\n\n\nconst Alert = (props) => {\n  const [ hide, setHide ] = useState(false);\n\n  if (hide) {\n    return null;\n  }\n\n  return (\n    <div className={`alert ${props.className}`} role=\"alert\">\n      {props.hasCloseBtn && <CloseBtn onClick={() => setHide(true)} />}\n      {props.children}\n    </div>\n  )\n};\n\nexport default Alert;\n","import React, { useState } from \"react\";\nimport \"./index.scss\";\nimport { auth } from \"../../firebaseAPI\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  Formik,\n  Form\n} from \"formik\";\nimport {\n  emailRequired,\n  required\n} from \"../../tool/validate\";\nimport TextField from \"../TextField\";\nimport MainBtn from \"../BtnMain\";\nimport SocialAuth from \"../SocialAuth\";\nimport Alert from \"../Alert\";\n\n\n// 提示登入錯誤訊息\nconst handleError = Err => {\n  switch (Err) {\n    case \"auth/wrong-password\":\n      return (\n        <Alert className=\"alert-danger\">\n          密碼錯誤\n        </Alert>\n      );\n    case \"auth/user-not-found\":\n      return (\n        <Alert className=\"alert-danger\">\n          此帳號不存在\n        </Alert>\n      );\n    default:\n      return null\n  }\n};\n\n// 主要表單\nconst FormLogin = (props) => {\n  const history = useHistory();\n  const [ responseStatus, setResponseStatus ] = useState(null);\n\n\n  return (\n    <div className=\"login\">\n      <h1>登入帳號</h1>\n      <SocialAuth/>\n      <p>或者用電子郵件登入</p>\n      <Formik\n        initialValues={{\n          email: '',\n          password: ''\n        }}\n        onSubmit={async (values, {resetForm}) => {\n          const { email, password } = values;\n          try {\n            await auth.signInWithEmailAndPassword(email, password);\n            history.push(\"/\");\n          } catch (error) {\n            setResponseStatus(error.code);\n            resetForm({\n              email: '',\n              password: ''\n            });\n          }\n        }}\n      >\n        <>\n          {responseStatus && handleError(responseStatus)}\n          <Form>\n            <TextField label=\"Email\" name=\"email\" type=\"email\" validate={emailRequired} />\n            <TextField label=\"密碼\" name=\"password\" type=\"password\" validate={required}/>\n            <p><button type={\"button\"} className=\"link\" onClick={props.onClickForgetForm}>忘記密碼？</button></p>\n            <MainBtn text=\"登入\" type=\"submit\"/>\n          </Form>\n        </>\n      </Formik>\n    </div>\n  )\n};\n\nexport default FormLogin;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { auth, db, storage } from \"../../firebaseAPI\";\nimport { Formik, Form, useFormikContext } from \"formik\";\nimport {confirmPassword, emailRequired, passwordRequired, required} from \"../../tool/validate\";\n\nimport TextField from \"../TextField\";\nimport MainBtn from \"../BtnMain\";\nimport SocialAuth from \"../SocialAuth\";\n\nconst FormRegister = (props) => {\n\n  return (\n    <div className=\"register\">\n      <h1>註冊帳號</h1>\n      <SocialAuth />\n      <p>或者用電子郵件註冊</p>\n      <Formik\n        initialValues={{\n          nickname: '',\n          email: '',\n          password: '',\n          confirmPassword: ''\n        }}\n        onSubmit={async (values, {resetForm}) => {\n          let { email, password, nickname } = values;\n          try {\n            await auth.createUserWithEmailAndPassword(email, password)\n              .then(res => {\n                const defaultImg = \"avatars/default.jpg\";\n                props.handleResponse('success');\n                storage.ref(defaultImg).getDownloadURL()\n                  .then(url => {\n                    db.collection(\"users\").doc(res.user.uid).set({\n                      nickname,\n                      avatar: {\n                        fileLocation: defaultImg,\n                        url: url\n                      }\n                    });\n                  });\n                resetForm({\n                  nickname: '',\n                  email: '',\n                  password: ''\n                });\n              });\n          } catch (error) {\n            props.handleResponse(error.code);\n            resetForm({\n              nickname: '',\n              email: '',\n              password: ''\n            });\n          }\n        }}\n      >\n        {({values}) => (\n          <Form>\n            <TextField label=\"暱稱/稱呼\" name=\"nickname\" type=\"text\" validate={required} />\n            <TextField label=\"Email\" name=\"email\" type=\"email\" validate={emailRequired} />\n            <TextField label=\"密碼\" name=\"password\" type=\"password\" validate={passwordRequired}/>\n            <TextField label=\"確認密碼\" name=\"confirmPassword\" type=\"password\" validate={(value) => confirmPassword(value, values.password)}/>\n            <MainBtn text=\"註冊\" type=\"submit\"/>\n          </Form>\n        )}\n      </Formik>\n    </div>\n  )\n};\n\nexport default FormRegister;\n\n\n","import React from \"react\";\nimport \"./index.scss\";\nimport CloseBtn from \"../BtnClose\";\n\nconst Modal = (props) => {\n  let classN = props.className ? props.className : '';\n\n  if (props.title.length) {\n    return (\n      <>\n        <div className={`modal modal-format ${classN}`}>\n          <div className=\"modal-inner\">\n            <CloseBtn onClick={props.onClick} />\n            <div className=\"modal-header\">\n              <h1>{props.title}</h1>\n            </div>\n            <div className=\"modal-content\">\n              {props.children}\n            </div>\n          </div>\n        </div>\n        <div className=\"modal-overlay\"></div>\n      </>\n    )\n  }\n  return (\n    <>\n      <div className={`modal ${classN}`}>\n        <div className=\"modal-inner\">\n          <CloseBtn onClick={props.onclick} />\n          <div className=\"modal-content\">\n            {props.children}\n          </div>\n        </div>\n      </div>\n      <div className=\"modal-overlay\"></div>\n    </>\n  )\n};\n\nexport default Modal;\n","import React, {useState} from \"react\";\nimport \"./index.scss\";\nimport { auth } from \"../../firebaseAPI\";\nimport Modal from \"../Modal\";\nimport {Form, Formik} from \"formik\";\nimport TextField from \"../TextField\";\nimport MainBtn from \"../BtnMain\";\nimport { emailRequired } from \"../../tool/validate\";\nimport Alert from \"../Alert\";\n\n\n// 提示登入錯誤訊息\nconst handleMsg = res => {\n  switch (res) {\n    case \"success\":\n      return (\n        <Alert className=\"alert-success\">\n          已發送到你的Email\n        </Alert>\n      );\n    case \"auth/user-not-found\":\n      return (\n        <Alert className=\"alert-danger\">\n          沒有符合的註冊Email資訊\n        </Alert>\n      );\n    default:\n      return null\n  }\n};\n\nconst FormForgetPassword = (props) => {\n  const [ responseStatus, setResponseStatus ] = useState(null);\n  return (\n    <Modal className=\"forget-password\" title={\"忘記密碼？\"} onClick={props.onClick}>\n      <p>請輸入當初註冊的Email，我們將會寄一封重設密碼信給您</p>\n      <Formik\n        initialValues={{\n          email: \"\"\n        }}\n        onSubmit={async (values, { resetForm }) => {\n          try {\n            await auth.sendPasswordResetEmail(values.email)\n              .then(() => {\n                setResponseStatus(\"success\");\n                resetForm({\n                  email: '',\n                  password: ''\n                });\n              });\n          } catch (error) {\n            setResponseStatus(error.code);\n            resetForm({\n              email: '',\n              password: ''\n            });\n          }\n        }}\n      >\n        <Form>\n          { responseStatus && handleMsg(responseStatus)}\n          <TextField label={\"Email\"} name={\"email\"} type={\"email\"} validate={emailRequired} />\n          <MainBtn type={\"submit\"} text={\"送出\"} />\n        </Form>\n      </Formik>\n    </Modal>\n  )\n};\n\nexport default FormForgetPassword;\n","import React from \"react\";\nimport \"./index.scss\";\nimport style from \"./login.module.scss\";\nimport LoginForm from \"../../components/FormLogin\";\nimport Register from \"../../components/FormRegister\";\nimport ForgetPassword from \"../../components/FormForgetPassword\";\nimport Modal from \"../../components/Modal\";\nimport {Link} from \"react-router-dom\";\n\nconst ReturnMsg = (props) => {\n  switch (props.code) {\n    case 'success':\n      return (\n        <Modal title=\"歡迎您已成為 Hippo\" onClick={props.onClick}>\n          <p>我們已寄註冊驗證信到你的Email，請您繼續完成驗證。</p>\n          <Link to=\"/\" className=\"btn btn-rounded btn-primary\">回首頁</Link>\n        </Modal>\n      );\n    case 'auth/email-already-in-use':\n      return (\n        <Modal title=\"註冊失敗\" onClick={props.onClick}>\n          <p>這個Email已經是網站會員，沒有辦法重複註冊喔。</p>\n        </Modal>\n      );\n    default:\n      return null\n  }\n};\n\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: \"activeA\",\n      hide: \"groupB\",\n      responseStatus: null,\n      isModalOpen: false,\n      forgetPasswordStatus: false\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.showForgetPassword = this.showForgetPassword.bind(this);\n    this.handleResponseStatus = this.handleResponseStatus.bind(this);\n    this.hideModal = this.hideModal.bind(this);\n  }\n  handleClick() {\n    this.setState(state => ({\n      active: state.active === \"activeA\" ? \"activeB\" : \"activeA\"\n    }));\n    setTimeout(() => this.setState(state => ({\n      hide: state.hide === \"groupB\" ? \"groupA\" : \"groupB\"\n    })), 400);\n  }\n  showForgetPassword() {\n    this.setState(state => ({\n      forgetPasswordStatus: !state.forgetPasswordStatus\n    }));\n  }\n  handleResponseStatus(res) {\n    this.setState(state => ({\n      responseStatus: res,\n      isModalOpen: true\n    }))\n  }\n  hideModal() {\n    this.setState(state => ({\n      isModalOpen: false\n    }))\n  }\n  render() {\n    let innerClass= `${style.inner} ${this.state.active}`;\n    let groupAClass = this.state.hide === \"groupA\" ? \"hide\" : \"\";\n    let groupBClass = this.state.hide === \"groupB\" ? \"hide\" : \"\";\n    return(\n      <main className=\"container-fluid\">\n        <div className={innerClass}>\n          <div className={`form groupA ${groupAClass}`}>\n            <LoginForm onClickForgetForm={this.showForgetPassword} />\n          </div>\n          <div className={`box groupA ${groupAClass}`}>\n            <div className=\"box-inner\">\n              <h2 className=\"text-white\">你是新成員？</h2>\n              <button\n                type=\"button\"\n                className=\"btn btn-rounded btn-white-outline\"\n                onClick={() => this.handleClick()}\n              >前往註冊</button>\n            </div>\n          </div>\n          <div className={`form groupB ${groupBClass}`}>\n            <Register handleResponse={this.handleResponseStatus}/>\n          </div>\n          <div className={`box groupB ${groupBClass}`}>\n            <div className=\"box-inner\">\n              <h2 className=\"text-white\">你已經有帳號了嗎？</h2>\n              <button\n                type=\"button\"\n                className=\"btn btn-rounded btn-white-outline\"\n                onClick={() => this.handleClick()}\n              >前往登入</button>\n            </div>\n          </div>\n        </div>\n        {this.state.forgetPasswordStatus && <ForgetPassword onClick={this.showForgetPassword} />}\n        {this.state.isModalOpen && <ReturnMsg code={this.state.responseStatus} onClick={this.hideModal} />}\n      </main>\n    )\n  }\n};\n\nexport default LoginPage;\n\n\n\n\n\n","import React, { createRef, useContext }from \"react\";\nimport \"./index.scss\";\nimport style from \"./chatList.module.scss\"\nimport { AuthContext } from \"../../Auth\";\nimport moment from \"moment\";\n\nfunction HandlerDate(d) {\n  const now = moment();\n  const date = moment(+d);\n  const seconds = now.diff(date, \"seconds\");\n  const minutes = now.diff(date, \"minutes\");\n  const hours = now.diff(date, \"hours\");\n  let result;\n\n  if (now.get('date') === date.get('date')) {\n    if (seconds === 0 || seconds === 1) {\n      result = `1秒前`;\n    } else if (seconds <= 60) {\n      result = `${seconds}秒前`;\n    } else if (minutes <= 60) {\n      result = `${minutes}分鐘前`;\n    } else if (hours <= 24) {\n      result = date.format(\"H:mm\");\n    }\n  } else if (hours <= 48) {\n    result = \"昨天\";\n  } else if (hours <= 72) {\n    result = \"前天\";\n  } else {\n    result = date.format(\"MM/DD\");\n  }\n  return result;\n}\n\nconst ChatSummary = (props) => {\n  const { currentUser, currentChatId } = useContext(AuthContext);\n  const chat = props.chat;\n  const date = HandlerDate(chat.last_msg_id);\n  const _class = currentChatId === chat.id ? style['item-active'] : style.item;\n  const id = currentUser.uid;\n\n\n\n  return (\n    <li className={_class} onClick={() => {props.onClick(chat.id)}}>\n      <div className={style.summary}>\n        <div className={style[\"summary-avatar\"]}>\n          <img src={chat.avatar} alt=\"\"/>\n        </div>\n        <h4 className={style[\"summary-name\"]}>{chat.name}\n          {chat.members.length > 2 ? <span>{`(${chat.members.length})`}</span> : null}\n        </h4>\n        <p className={style[\"summary-text\"]}>{chat.last_msg}</p>\n        <div className={style.col}>\n          <div className={style.date}>{date}</div>\n          {chat.unread[id] > 0 ? <span className={style.unread}>{chat.unread[id]}</span> : null}\n        </div>\n      </div>\n    </li>\n  )\n};\n\nclass ChatList extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchHeight: \"auto\",\n      roomHeight: 0,\n      padding: false\n    };\n    this.search = createRef();\n    this.UpdateDimensions = this.UpdateDimensions.bind(this);\n  }\n  componentDidMount() {\n    window.addEventListener('resize', this.UpdateDimensions);\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.props.headerHeight !== nextProps.headerHeight) {\n      this.UpdateDimensions();\n    }\n    return true;\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.UpdateDimensions);\n  }\n  UpdateDimensions() {\n    this.setState({\n      searchHeight: this.search.current.clientHeight,\n    }, function () {\n      this.setState((state) => {\n        return {\n          roomHeight: window.innerHeight - (this.props.headerHeight + state.searchHeight)\n        }\n      });\n    });\n  }\n  render() {\n    const _chats = this.props.chats.map(chat => <ChatSummary key={chat.id} chat={chat} onClick={this.props.talking}/>);\n\n    return (\n      <section className={`chat-control ${this.props.className}`}>\n        <div className=\"chat-search\" ref={this.search}>\n          <div className=\"input-field\">\n            <label htmlFor=\"roomSearch\">\n              搜尋\n              <i className=\"fa fa-search\"></i>\n            </label>\n            <input id=\"roomSearch\" type=\"text\" />\n          </div>\n          <button className=\"icon-btn\" title=\"排序\"><i className=\"fa fa-sort\"></i></button>\n        </div>\n        <ul className={style.items} style={{height: this.state.roomHeight}}>\n          {_chats.length > 0 ? _chats :\n            <p className=\"text-center pt-5\">找個人聊天吧！</p>\n          }\n        </ul>\n      </section>\n    )\n  }\n}\n\nexport default ChatList;\n\n\n\n","import React, { createRef, useContext} from \"react\";\nimport style from \"./index.module.scss\";\nimport {AuthContext} from \"../../Auth\";\nimport moment from \"moment\";\n\nfunction HandlerDate(d) {\n  const now = moment();\n  const date = moment(+d);\n  const seconds = now.diff(date, \"seconds\");\n  const minutes = now.diff(date, \"minutes\");\n  const hours = now.diff(date, \"hours\");\n  let result;\n\n  if (now.get('date') === date.get('date')) {\n    if (seconds === 0 || seconds === 1) {\n      result = `1秒前`;\n    } else if (seconds <= 60) {\n      result = `${seconds}秒前`;\n    } else if (minutes <= 60) {\n      result = `${minutes}分鐘前`;\n    } else if (hours <= 24) {\n      result = date.format(\"H:mm\");\n    }\n  } else if (hours <= 48) {\n    result = \"昨天\";\n  } else if (hours <= 72) {\n    result = \"前天\";\n  } else {\n    result = date.format(\"MM/DD\");\n  }\n  return result;\n}\n\n// textarea 調整高度\nfunction textareaDimensions(target) {\n  const maxHeight = 150;\n  const _clientHeight = target.clientHeight;\n  const _scrollHeight = target.scrollHeight;\n  let height = _clientHeight < maxHeight ? _scrollHeight : _clientHeight ;\n\n  if (height > maxHeight) {\n    height = maxHeight;\n  }\n\n  return height;\n}\n\nfunction isReaded(readed) {\n  return readed ? \"已讀\" : '';\n}\n\nconst Dialog = (props) => {\n  const { currentUser } = useContext(AuthContext);\n  const currentUid = currentUser.uid;\n  let _className = style[\"dialog\"];\n  const msg = props.msg;\n  const target = props.members.filter(user => user.id === msg.sentBy)[0];\n\n  if (msg.sentBy === currentUid) {\n    _className += \" \" + style[\"local\"]\n  } else {\n    _className += \" \" + style[\"remote\"];\n  }\n\n  return (\n    <div className={_className}>\n      {\n        msg.sentBy !== currentUid && (\n          <div className={style[\"avatar\"]}>\n            <img src={target.avatar.url} alt={target.nickname}/>\n          </div>\n        )\n      }\n      <div className={style[\"say\"]}>{msg.text}</div>\n      <div className={style[\"states\"]}>\n        { msg.sentBy === currentUid && <div>{isReaded(msg.readed)}</div>}\n        <div>{HandlerDate(msg.id)}</div>\n      </div>\n    </div>\n  )\n};\n\nclass ChatSpace extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this._header = createRef();\n    this._chatInputSection = createRef();\n    this.state = {\n      headerHeight: 'auto',\n      inputHeight: 'auto',\n      dialogueHeight: 'auto',\n      value: '',\n      showing: false\n    };\n    this.UpdateDimensions = this.UpdateDimensions.bind(this);\n    this.inputHandle = this.inputHandle.bind(this);\n    this.submitHandle = this.submitHandle.bind(this);\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.UpdateDimensions);\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    // console.log(77, nextState.dialogueHeight == \"auto\", Object.keys(nextProps.current.chat).length > 0);\n    if (nextState.dialogueHeight == \"auto\" && Object.keys(nextProps.current.chat).length > 0 && this._header.current) {\n      this.UpdateDimensions();\n    }\n    return true;\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.UpdateDimensions);\n  }\n  UpdateDimensions() {\n    this.setState({\n      headerHeight: this._header.current.clientHeight\n    }, function () {\n      this.setState(state => ({\n        dialogueHeight: window.innerHeight - (this.props.headerHeight + this._chatInputSection.current.clientHeight + state.headerHeight + 2)\n      }));\n    });\n  }\n  inputHandle(e) {\n    const target = e.target;\n\n    this.setState({\n      value: target.value\n    });\n\n    this.setState({\n      inputHeight: \"auto\"\n    }, function () {\n      this.setState({\n        inputHeight: textareaDimensions(target)\n      });\n      this.UpdateDimensions();\n    });\n  }\n  submitHandle(e) {\n    const { currentUser } = this.context;\n\n    // enter event\n    if (e.nativeEvent.keyCode === 13) {\n      e.preventDefault();\n\n       let msg = this.state.value;\n\n       if (typeof msg === \"string\") {\n         msg = msg.trim();\n         if (msg.length > 0) {\n           this.props.AddMessages({\n             text: msg,\n             sentBy: currentUser.uid\n           });\n           this.setState({\n             value: \"\"\n           })\n         }\n       }\n    }\n  }\n  render() {\n    const _className = this.props.className ? \"chat-space \" + this.props.className : \"chat-space\";\n    const { chat, members, dialogue } = this.props.current;\n    let messages = [];\n\n    if (members.length > 0) {\n      messages = dialogue.map(msg => <Dialog key={msg.id} msg={msg} members={members}/>);\n    }\n\n    if (Object.keys(chat).length == 0) {\n      return <section className={_className}></section>\n    }\n\n    return (\n      <section className={_className}>\n        <header ref={this._header} className={style[\"chat-space-header\"]}>\n          <button className={style[\"icon-btn\"]} onClick={this.props.toList}><i className=\"fa fa-chevron-left\"/></button>\n          <h4 className={style[\"user-name\"]}>{ Object.keys(this.props.current.chat).length > 0 ? this.props.current.chat.name : \"...\" }</h4>\n        </header>\n        <div className={style[\"chat-space-body\"]}>\n          <div className={style[\"dialogue\"]} style={{height: this.state.dialogueHeight}}>\n            { messages.length ? messages : null }\n          </div>\n          <div className={style[\"chat-input\"]} ref={this._chatInputSection}>\n            <div className={style[\"chat-input-field\"]}>\n              <textarea\n                rows=\"1\"\n                placeholder=\"輸入訊息\"\n                value={this.state.value}\n                onChange={this.inputHandle}\n                onKeyPress={this.submitHandle}\n                style={{height: this.state.inputHeight}}\n              />\n            </div>\n            <div className={style[\"chat-input-tool\"]}>\n              <button className={style[\"icon-btn\"]} title=\"傳送檔案\"><i className=\"fa fa-paperclip\"/></button>\n              <button className={style[\"icon-btn\"]} title=\"emoji\"><i className=\"fa fa-smile-o\"/></button>\n              <button\n                className={style[\"icon-btn\"]}\n                title=\"傳送\"\n                onClick={this.inputHandle}\n              >\n                <i className=\"fa fa-paper-plane\"/>\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n    )\n  }\n}\n\n\nexport default ChatSpace;\n","import React from \"react\";\nimport \"./index.scss\";\nimport ChatList from \"../../components/ChatList\";\nimport ChatSpace from \"../../components/ChatSpace\";\nimport { AuthContext } from \"../../Auth\";\nimport {db} from \"../../firebaseAPI\";\nimport firebase from \"firebase\";\n\nclass Chat extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.users = db.collection('users');\n    this.userChats = db.collection('userChats');\n    this.chats = db.collection('chats');\n    this.chatMessages = db.collection('chatMessages');\n    this.msgListener = [];\n\n    this.state = {\n      padding: true,\n      mobile: null,\n      chatListClass: '',\n      chatSpaceClass: '',\n      headerHeight: null,\n      current: {\n        chat: {},\n        members: [],\n        dialogue: []\n      },\n      chats: []\n    };\n\n    this.IsMobile = this.IsMobile.bind(this);\n    this.WindowResize = this.WindowResize.bind(this);\n    this.showChatList = this.showChatList.bind(this);\n    this.showChatSpace = this.showChatSpace.bind(this);\n    this.UpdateDimensions = this.UpdateDimensions.bind(this);\n    this.HandleChangeChatId = this.HandleChangeChatId.bind(this);\n    this.GetChats = this.GetChats.bind(this);\n    this.SetCurrentChat = this.SetCurrentChat.bind(this);\n    this.GetCurrentUsers = this.GetCurrentUsers.bind(this);\n    this.GetCurrentMessages = this.GetCurrentMessages.bind(this);\n    this.AddMessages = this.AddMessages.bind(this);\n    this.GetMessages = this.GetMessages.bind(this);\n  }\n  componentDidMount() {\n    this.IsMobile();\n    this.GetChats().then(state => {\n      if (state) {\n        this.GetMessages();\n        this.HandleChangeChatId();\n      } else {\n        this.setState({\n          padding: false\n        }, () => {\n          this.UpdateDimensions();\n        });\n      }\n    });\n    window.addEventListener('resize', this.WindowResize);\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    // const { currentChatId } = this.context;\n\n    // if (nextState.chats.length > 0 && !currentChatId) {\n    //   this.HandleChangeChatId();\n    // }\n\n    return true;\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.WindowResize);\n  }\n  UpdateDimensions() {\n    this.setState({\n      headerHeight: this.props.header.current.clientHeight\n    })\n  }\n  IsMobile() {\n    const mql = window.matchMedia('(max-width: 700px');\n    this.setState({\n      mobile: mql.matches\n    }, function () {\n      if (this.state.mobile) {\n        this.setState({\n          chatListClass: 'active'\n        });\n      } else {\n        this.setState({\n          chatListClass: '',\n          chatSpaceClass: ''\n        });\n      }\n    });\n  }\n  WindowResize() {\n    this.IsMobile();\n  }\n  showChatList() {\n    this.setState({\n      chatListClass: 'ready',\n      chatSpaceClass: 'active'\n    }, function () {\n      setTimeout(() => {\n        this.setState({\n          chatListClass: 'ready go',\n          chatSpaceClass: 'active go'\n        }, function () {\n          setTimeout(() => {\n            this.setState({\n              chatListClass: 'active',\n              chatSpaceClass: ''\n            });\n          }, 600);\n        })\n      }, 50)\n    });\n  }\n  showChatSpace() {\n    this.setState({\n      chatListClass: 'active',\n      chatSpaceClass: 'ready'\n    }, function () {\n      setTimeout(() => {\n        this.setState({\n          chatListClass: 'active go',\n          chatSpaceClass: 'ready go'\n        }, function () {\n          setTimeout(() => {\n            this.setState({\n              chatListClass: '',\n              chatSpaceClass: 'active'\n            });\n          }, 600);\n        })\n      }, 50)\n    })\n  }\n  HandleChangeChatId(chat_id) {\n    const { currentChatId, changeChatId } = this.context;\n    let chatId;\n\n    if (!chat_id && currentChatId) {\n      chatId = currentChatId;\n    } else if (chat_id) {\n      chatId = chat_id;\n    } else {\n      chatId = this.state.chats[0].id;\n    }\n\n    if (chatId !== currentChatId) {\n      changeChatId(chatId);\n    }\n\n\n    console.log(2,chatId !== currentChatId, chatId, currentChatId);\n\n\n\n    this.setState({\n      current: {\n        chat: {},\n        members: [],\n        dialogue: []\n      },\n    }, async function () {\n      await this.SetCurrentChat(chatId);\n      await this.GetCurrentMessages(chatId);\n\n      this.setState({\n        padding: false\n      }, () => {\n        console.log(2.3);\n        this.showChatSpace();\n        this.UpdateDimensions();\n      });\n    });\n  }\n  GetChats() {\n    const { currentUser } = this.context;\n    const then = this;\n    const chats = [];\n\n    if (this.chatsListener) {\n      this.chatsListener();\n      this.chatsListener = null;\n    }\n    console.log(1);\n\n    return new Promise(resolve => {\n      this.chatsListener = this.chats.where(\"members\", \"array-contains\", currentUser.uid)\n        .onSnapshot(async function (snapshot) {\n          const docChanges = snapshot.docChanges();\n          console.log(1.1);\n\n          if (docChanges.length > 0) {\n            for (const i in docChanges) {\n              const change = docChanges[i];\n              const chatId = change.doc.id;\n              const chatData = change.doc.data();\n              const chat = {\n                ...chatData,\n                id: chatId\n              };\n\n              if (change.type === 'added') {\n                // 如果是 1by1 狀態，取得 chat 對象資料\n                if (chatData.members.length == 2) {\n                  const targetId = chatData.members.filter(person => person !== currentUser.uid)[0];\n                  const target = await then.users.doc(targetId).get()\n                    .then(userDoc => {\n                      return userDoc.data();\n                    });\n\n                  chat.name = target.nickname;\n                  chat.avatar = target.avatar.url;\n                }\n\n                chats.push(chat);\n\n                // 依最後訊息排序\n                if (chats.length > 1) chats.sort((a, b) => b.last_msg_id - a.last_msg_id);\n              }\n\n              if (change.type === 'modified') {\n                chats.forEach(item => {\n                  if (item.id === chat.id) {\n                    item.unread = chat.unread\n                  }\n                });\n              }\n            }\n            then.setState({\n              chats\n            }, () => {\n              resolve(true);\n              // then.GetMessages();\n              // then.HandleChangeChatId();\n              // then.GetMessages();\n            });\n          } else {\n            resolve(false);\n            // setTimeout(() => {\n            //   then.setState({\n            //     padding: false\n            //   }, () => {\n            //     then.UpdateDimensions();\n            //   })\n            // }, 1000);\n          }\n        });\n    });\n\n\n  }\n  GetMessages() {\n    const then = this;\n    const chats =[...this.state.chats];\n\n\n    if (this.msgListener.length > 0) {\n      this.msgListener.forEach(item => {\n        item();\n      });\n      this.msgListener.length = 0;\n    }\n\n    for (const i in chats) {\n      const chatId = chats[i].id.toString();\n      // let unread = 0;\n      let last_msg = \"\",\n          last_msg_id = \"\";\n      const chatMessages = this.chatMessages.doc(chatId).collection('messages');\n\n      // 每個 chat 的訊息\n      this.msgListener[i] = chatMessages.orderBy(\"created\", \"desc\").limit(1)\n        .onSnapshot(async function (snapshot) {\n          const docChanges = snapshot.docChanges();\n\n          for (const index in docChanges) {\n            const change = docChanges[index];\n            const id = change.doc.id;\n            const msgData = change.doc.data();\n            const msg = {\n              ...msgData,\n              id\n            };\n\n            if (change.type === \"added\") {\n              // 更新 chat 未讀總計\n              // if (msgData.sentBy !== currentUser.uid && !msg.readed) {\n              //   unread++;\n              // }\n\n              // 更新 最新訊息\n              last_msg = msg.text;\n              last_msg_id = msg.id;\n            }\n\n            // if (change.type === \"modified\") {\n            //   unread = 0;\n            // }\n          }\n\n          then.chats.doc(chatId).update({\n            // unread: unread,\n            last_msg: last_msg,\n            last_msg_id: last_msg_id\n          }).then(() => {\n            then.setState(prevState => {\n              const chats = prevState.chats;\n              const index = chats.findIndex(chat => chat.id === chatId);\n              chats[index] = {\n                ...chats[index],\n                // unread: unread,\n                last_msg: last_msg,\n                last_msg_id: last_msg_id\n              };\n\n              chats.sort((a, b) => b.last_msg_id - a.last_msg_id);\n              return {\n                chats: chats\n              }\n            });\n          });\n      });\n    }\n  }\n  SetCurrentChat(id) {\n    const chat = this.state.chats.filter(chat => {\n      return chat.id === id\n    })[0];\n\n    this.setState(state => ({\n      current: {\n        ...state.current,\n        chat: chat\n      }\n    }), () => {\n      console.log(3, this.state.current);\n      this.GetCurrentUsers(this.state.current.chat.members);\n    });\n  }\n  GetCurrentMessages(chatId) {\n    const then = this;\n    const { currentUser, currentChatId } = this.context;\n    const chatMessages = this.chatMessages.doc(chatId.toString()).collection(\"messages\");\n    const _messages = [];\n\n    if (this.currentMsgListener) {\n      this.currentMsgListener();\n      this.currentMsgListener = null;\n    }\n    console.log(44);\n\n    this.currentMsgListener = chatMessages.orderBy(\"created\", \"desc\")\n      .onSnapshot(function (snapshot) {\n        const docChanges = snapshot.docChanges();\n\n        for (const index in docChanges) {\n          const change = docChanges[index];\n          const msgId = change.doc.id;\n          const msgData = change.doc.data();\n\n          if (change.type === 'added') {\n            // 更新 message 未讀 => 已讀\n            if (msgData.sentBy !== currentUser.uid && !msgData.readed) {\n              chatMessages.doc(msgId).update({\n                readed: true\n              });\n              then.chats.doc(currentChatId).update({\n                [\"unread.\" + currentUser.uid]: 0\n              });\n            }\n            _messages.push({\n              ...msgData,\n              id: msgId\n            });\n          }\n\n          if (change.type === \"modified\") {\n            const i = _messages.findIndex(msg => msg.id == msgId);\n            _messages[i] = {\n              ...msgData,\n              id: msgId\n            };\n          }\n        }\n        _messages.sort((a, b) => b.id - a.id);\n\n        then.setState(prevState => ({\n          current: {\n            ...prevState.current,\n            dialogue: _messages\n          }\n        }));\n    });\n\n  }\n  async GetCurrentUsers(users) {\n    const _users = [];\n\n    for (const i in users) {\n      await this.users.doc(users[i]).get()\n        .then(userDoc => {\n          _users.push({\n            ...userDoc.data(),\n            id: userDoc.id\n          });\n        });\n    }\n\n    this.setState(prevState => ({\n      current: {\n        ...prevState.current,\n        members: _users\n      }\n    }));\n  }\n  AddMessages(dialog) {\n    const { currentUser,  currentChatId } = this.context;\n    const msgId = Date.now().toString();\n    const target = this.state.current.members.filter(person => person.id !== currentUser.uid)[0];\n\n    this.chatMessages.doc(currentChatId.toString()).collection(\"messages\").doc(msgId)\n      .set({\n        type: 1,\n        text: \"\",\n        imgs: [],\n        readed: false,\n        created: firebase.firestore.FieldValue.serverTimestamp(),\n        ...dialog\n      });\n    this.chats.doc(currentChatId).update({\n      [\"unread.\" + target.id]: firebase.firestore.FieldValue.increment(+1)\n    });\n  }\n  render() {\n    if (this.state.padding) return <div className=\"pt-5 text-center\">Loading...</div>\n    return (\n      <main className=\"chat\">\n        <div className=\"chat-row\">\n          <ChatList\n            className={this.state.chatListClass}\n            headerHeight={this.state.headerHeight}\n            talking={this.HandleChangeChatId}\n            chats={this.state.chats}\n          />\n          <ChatSpace\n            className={this.state.chatSpaceClass}\n            headerHeight={this.state.headerHeight}\n            toList={this.showChatList}\n            current={this.state.current}\n            AddMessages={this.AddMessages}\n          />\n        </div>\n      </main>\n    )\n  }\n}\n\nexport default Chat;\n","import React, { createRef } from \"react\";\nimport style from \"./index.module.scss\";\nimport { storage, db } from \"../../firebaseAPI\";\nimport {AuthContext} from \"../../Auth\";\n\nclass AvatarUpdate extends React.Component {\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      imgFileLocal: null,\n      imgUrl: null\n    };\n    this.ChangeFile = this.ChangeFile.bind(this);\n    this.CheckImgSize = this.CheckImgSize.bind(this);\n    this.HandlerImg = this.HandlerImg.bind(this);\n    this.Compression = this.Compression.bind(this);\n    this.SetUserAvatar = this.SetUserAvatar.bind(this);\n    this.DeleteUserAvatar = this.DeleteUserAvatar.bind(this);\n    this._file = createRef();\n    this._canvas = createRef();\n    this.users = db.collection(\"users\");\n  }\n  componentDidMount() {\n    const { currentUser } = this.context;\n    if (currentUser) {\n      this.users.doc(currentUser.uid).get()\n        .then(res => {\n          this.setState({\n            imgFileLocal: res.data().avatar.fileLocation,\n            imgUrl: res.data().avatar.url\n          },function () {\n            this.HandlerImg(this.state.imgUrl);\n          });\n        });\n    }\n  }\n  ChangeFile() {\n    const reader = new FileReader();\n    const files = this._file.current.files[0];\n\n    if (typeof files !== \"undefined\") {\n      if (this.CheckImgSize(files.size)) {\n        reader.readAsDataURL(files);\n        reader.onload = () => {\n          const url = reader.result;\n          if (url.length > 0) {\n            this.HandlerImg(url, files);\n          }\n        }\n      } else {\n        this._file.current.value = \"\";\n      }\n    }\n  }\n  CheckImgSize(size) {\n    const maxBytes = 10485760;\n    const stok = Math.ceil(size / 1024);\n    const mtok = Math.ceil(maxBytes / 1024);\n\n    if (size > maxBytes) {\n      alert(`您所選擇的檔案大小為 ${stok}KB，已超過上傳上限。(檔案上限：${mtok}KB。)`);\n      return false;\n    } else {\n      return true;\n    }\n  }\n  HandlerImg(url, file) {\n    let dx, dy;\n    const viewDimensions = {\n      width: 100,\n      height: 100\n    };\n    const canvas = this._canvas.current;\n    const then = this;\n\n    if (canvas.getContext) {\n      const _img = new Image();\n      _img.src = url;\n      _img.onload = function() {\n        const ctx = canvas.getContext('2d');\n        const { width, height } = then.ImgDimensions(_img, viewDimensions);\n        canvas.width = width;\n        canvas.height = height;\n        dx = (width - width) / 2;\n        dy = (height - height) / 2;\n        ctx.drawImage(this, dx, dy, viewDimensions.width, viewDimensions.height);\n        if (file) then.Compression(file);\n      }\n    }\n  }\n  ImgDimensions(img, viewDimensions) {\n    let scale, mate;\n    let { width, height } = img;\n    const minSize = Math.min(width, height);\n    const maxSize = Math.min(width, height);\n\n    if (viewDimensions.width === viewDimensions.height) {\n      return viewDimensions;\n    } else if (Math.min(viewDimensions.width, viewDimensions.height) >= maxSize) {\n      mate = maxSize;\n    } else {\n      mate = minSize;\n    }\n\n    switch (mate) {\n      case viewDimensions.width:\n        scale = width / viewDimensions.width;\n        width = viewDimensions.width;\n        height = height / scale;\n        break;\n      default:\n        scale = height / viewDimensions.height;\n        width = width / scale;\n        height = viewDimensions.height;\n        break;\n    }\n\n    return {\n      width,\n      height\n    };\n  }\n  Compression(file) {\n    const then = this;\n    this._canvas.current.toBlob(function (blob) {\n      let fileName = file.name.replace(/(.+)(\\.(jpg|jpeg|png))$/gi, Date.now() + '$2')\n\n      const local = \"avatars/\" + fileName;\n      const ref = storage.ref(local);\n      ref.put(blob).then(snapshot => {\n        then.SetUserAvatar(local);\n      });\n    }, file.type, .9);\n  }\n  async SetUserAvatar(local) {\n    const { currentUser } = this.context;\n    if (this.state.imgFileLocal && this.state.imgFileLocal !== \"avatars/default.jpg\") {\n      await this.DeleteUserAvatar();\n    }\n    storage.ref(local).getDownloadURL()\n      .then(url => {\n        this.users.doc(currentUser.uid).update({\n          avatar: {\n            fileLocation: local,\n            url\n          }\n        })\n          .then(() => {\n            this.setState({\n              imgFileLocal: local,\n              imgUrl: url\n            })\n          });\n      });\n  }\n  DeleteUserAvatar() {\n    storage.ref(this.state.imgFileLocal).delete()\n      .then(() => console.log(\"success\"));\n  }\n  render () {\n    return (\n      <div className={style.avatar}>\n        <div className={style[\"img-frame\"]}>\n          <canvas ref={this._canvas}></canvas>\n        </div>\n        <div className=\"d-none\">\n          <input\n            ref={this._file}\n            type=\"file\"\n            name=\"avatar\"\n            id=\"avatar\"\n            accept=\"image/png, image/jpeg\"\n            onChange={this.ChangeFile}\n          />\n        </div>\n        <button className={style['avatar-btn']} onClick={()=> this._file.current.click()}>編輯</button>\n      </div>\n    )\n  }\n}\n\n\nexport default AvatarUpdate;\n","import React from \"react\";\nimport \"./index.scss\";\nimport style from \"./account.module.scss\";\nimport { auth, db } from \"../../firebaseAPI\";\nimport { Formik, Form } from \"formik\";\nimport TextField from \"../../components/TextField\";\nimport { required } from \"../../tool/validate\";\nimport AvatarUpdate from \"../../components/AvatarUpdate\";\nimport { AuthContext } from \"../../Auth\";\n\n\nconst EditArea = (props) => {\n  if (props.isEdit) {\n    return (\n      <div className=\"col-12 nickname\">\n        <Formik\n          initialValues={{\n            nickname: \"\"\n          }}\n          onSubmit={(values, {resetForm}) => {\n            const user = auth.currentUser;\n            db.collection(\"users\").doc(user.uid).update({\n              nickname: values.nickname\n            }).then(() => {\n              props.getUserInfo();\n              resetForm({\n                nickname: \"\"\n              });\n              props.onClick();\n            })\n          }}\n        >\n          <Form className={style[\"input-field\"]}>\n            <TextField label=\"暱稱/稱呼\" name=\"nickname\" type=\"text\" validate={required} />\n            <button type=\"submit\" className=\"btn\">確認</button>\n          </Form>\n        </Formik>\n      </div>\n    )\n  } else {\n    return (\n      <>\n        <div className=\"col-3\">\n          <p className=\"label\">稱呼</p>\n        </div>\n        <div className=\"col-9 nickname\">\n          <p className=\"value pr-4\">{props.nickname ? props.nickname : \"nobody\"}</p>\n          <button className=\"btn btn-sm\" onClick={props.onClick}>編輯</button>\n        </div>\n      </>\n    )\n  }\n};\n\n\nclass Account extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: null,\n      nickname: null,\n      isEdit: false\n    };\n    this.getUserInfo = this.getUserInfo.bind(this);\n    this.handlerClick = this.handlerClick.bind(this);\n  }\n  getUserInfo() {\n    const { currentUser } = this.context;\n    const then = this;\n    db.collection('users').doc(currentUser.uid).get()\n      .then(res => {\n        const data = res.data();\n        then.setState({\n          email: currentUser.email,\n          nickname: data.nickname\n        })\n      });\n  }\n  handlerClick() {\n    this.setState(state => ({\n      isEdit: !state.isEdit\n    }))\n  }\n  componentDidMount() {\n    this.getUserInfo();\n  }\n  render(){\n    return (\n      <main className=\"account\">\n        <div className=\"container\">\n          <h1 className=\"text-center\">會員資料</h1>\n          <div className=\"account-content\">\n            <AvatarUpdate />\n            <div className=\"row\">\n              <EditArea nickname={this.state.nickname} getUserInfo={this.getUserInfo} isEdit={this.state.isEdit} onClick={this.handlerClick} />\n            </div>\n            <div className=\"row\">\n              <div className=\"col-3\">\n                <p className=\"label\">Email</p>\n              </div>\n              <div className=\"col-9\">\n                <p className=\"value\">{this.state.email}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    )\n  }\n}\n\nexport default Account;\n","import React from \"react\";\nimport style from \"./index.module.scss\"\n\nconst CardMember = (props) => {\n  const person = props.person;\n  return (\n    <div className={style.card}>\n      <div className={style[\"img-frame\"]}>\n        <img src={person.avatar} alt={person.name}/>\n      </div>\n      <div className={style[\"card-body\"]}>\n        <h3 className={style[\"card-title\"]}>{person.nickname}</h3>\n        <button className={style.btn} onClick={() => props.onClick(props.id)}>聊天</button>\n      </div>\n    </div>\n  )\n};\n\nexport default CardMember;\n","import React from \"react\";\nimport \"./index.scss\";\nimport { db } from \"../../firebaseAPI\";\nimport CardMember from \"../../components/CardMember\";\nimport { AuthContext } from \"../../Auth\";\n\n\nclass Members extends React.Component{\n  static contextType = AuthContext;\n  constructor(props) {\n    super(props);\n    this.users = db.collection(\"users\");\n    this.userChats = db.collection(\"userChats\");\n    this.state = {\n      members: []\n    };\n    this.createChat = this.createChat.bind(this);\n    this.getMembers = this.getMembers.bind(this);\n\n  }\n  componentDidMount() {\n    this.users.get()\n      .then(this.getMembers);\n  }\n  componentWillUnmount() {\n  }\n  getMembers(querySnapshot) {\n    const { currentUser } = this.context;\n    const _members = [];\n\n    querySnapshot.forEach(function (user) {\n      const data = user.data();\n      if (currentUser && currentUser.uid === user.id) { return false }\n      _members.push({\n        id: user.id,\n        nickname: data.nickname,\n        avatar: data.avatar.url\n      });\n    });\n\n    this.setState({\n      members: _members\n    });\n  }\n  async createChat(id) {\n    const { currentUser, changeChatId } = this.context;\n    const userChats = db.collection('userChats');\n\n    if ( currentUser ) {\n      const chats = db.collection('chats');\n      const myselfIsFirst = await userChats.doc(currentUser.uid).get()\n        .then(doc => {\n          if (!doc.exists) return false;\n          return Object.keys(doc.data()).includes(id)\n        });\n      const targetIsFirst = await userChats.doc(currentUser.uid).get()\n        .then(doc => {\n          if (!doc.exists) return false;\n          return Object.keys(doc.data()).includes(currentUser.uid)\n        });\n\n      if (!myselfIsFirst && !targetIsFirst) {\n        chats.add({\n          name: null,\n          avatar: null,\n          members: [currentUser.uid, id],\n          last_msg_id: null,\n          unread: {\n            [currentUser.uid]: 0,\n            [id]: 0\n          }\n        })\n          .then(docRef => {\n            const chatId = docRef.id;\n            userChats.doc(currentUser.uid).set({\n              [id]: chatId,\n            }, {merge: true});\n            userChats.doc(id).set({\n              [currentUser.uid]: chatId,\n            }, {merge: true});\n            changeChatId(chatId);\n            this.props.history.push('/chat');\n          });\n      } else {\n        this.userChats.doc(currentUser.uid).get()\n          .then(doc => {\n            if (doc.exists) {\n              changeChatId(doc.data()[id]);\n              this.props.history.push('/chat');\n            }\n          });\n      }\n    } else {\n      this.props.history.push('/login');\n    }\n  }\n  render() {\n    const _members = this.state.members.map(member => (\n      <div key={member.id} className=\"col-6 col-md-4 col-lg-3\">\n        <CardMember id={member.id} person={member} onClick={this.createChat} />\n      </div>\n    ));\n    return (\n      <main className=\"members bg-secondary\">\n        <div className=\"container\">\n          <div className=\"row\">\n            {_members}\n          </div>\n        </div>\n      </main>\n    )\n  }\n}\n\nexport default Members;\n","import React, {createRef} from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport \"./index.scss\";\nimport AuthProvider from \"../../Auth\";\nimport PrivateRoute from \"../../PrivateRoute\";\nimport Header from \"../../components/Header\";\nimport LoginPage from \"../LoginPage\";\nimport Chat from \"../Chat\";\nimport Account from \"../Account\";\nimport Members from \"../Members\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this._header = createRef();\n  }\n  render() {\n    return (\n      <AuthProvider>\n        <Router>\n          <>\n            <Header headerRef={this._header}/>\n            <Switch>\n              <Route exact path=\"/\" component={Members}/>\n              <Route exact path=\"/login\" component={LoginPage}/>\n              <PrivateRoute exact path=\"/chat/\" props={{header: this._header}} component={Chat}/>\n              {/*<PrivateRoute exact path=\"/chat/\" aa={this._header} component={()=> <Chat header={this._header}/>}/>*/}\n              <PrivateRoute exact path=\"/account\" component={Account} />\n            </Switch>\n          </>\n        </Router>\n      </AuthProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. Index is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./views/App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport \"./firebaseAPI\";\nimport \"./sass/style.scss\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}